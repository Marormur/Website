{"version":3,"file":"finder-instance.js","sourceRoot":"","sources":["../../src/ts/legacy/finder-instance.js"],"names":[],"mappings":"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","sourcesContent":["console.log('FinderInstance loaded');\r\n\r\n/**\r\n * FinderInstance - Multi-Instance fähiger Finder-Implementierung\r\n *\r\n * Ermöglicht mehrere Finder-Fenster mit isolierten States\r\n * Zeigt, wie das Finder-Modul für Multi-Instance umgebaut werden kann\r\n */\r\n(function () {\r\n    'use strict';\r\n\r\n    // Constants\r\n    const ROOT_FOLDER_NAME = 'Computer';\r\n\r\n    /**\r\n     * Single Finder Instance\r\n     * Extends BaseWindowInstance to support multiple finder windows\r\n     */\r\n    class FinderInstance extends window.BaseWindowInstance {\r\n        constructor(config) {\r\n            super({\r\n                ...config,\r\n                type: 'finder',\r\n            });\r\n\r\n            // Finder-specific state\r\n            this.currentPath = [];\r\n            this.currentView = 'computer'; // 'computer', 'github', 'favorites', 'recent'\r\n            this.selectedItems = new Set();\r\n            this.viewMode = 'list'; // 'list', 'grid', 'columns'\r\n            this.sortBy = 'name'; // 'name', 'date', 'size', 'type'\r\n            this.sortOrder = 'asc'; // 'asc', 'desc'\r\n            this.githubRepos = [];\r\n            this.githubLoading = false;\r\n            this.githubError = false;\r\n            this.githubErrorMessage = '';\r\n            this.lastGithubItemsMap = new Map();\r\n            this.favorites = new Set();\r\n            this.recentFiles = [];\r\n\r\n            // DOM References (per instance)\r\n            this.domRefs = {\r\n                sidebarComputer: null,\r\n                sidebarGithub: null,\r\n                sidebarFavorites: null,\r\n                sidebarRecent: null,\r\n                breadcrumbs: null,\r\n                contentArea: null,\r\n                toolbar: null,\r\n                searchInput: null,\r\n            };\r\n\r\n            // GitHub cache\r\n            this.githubContentCache = new Map();\r\n\r\n            // Virtual file system (per instance)\r\n            this.virtualFileSystem = this._createVirtualFileSystem();\r\n        }\r\n\r\n        /**\r\n         * Create virtual file system for this instance\r\n         * @private\r\n         */\r\n        _createVirtualFileSystem() {\r\n            const rootFolder = {\r\n                type: 'folder',\r\n                icon: '💻',\r\n                children: {\r\n                    Documents: {\r\n                        type: 'folder',\r\n                        icon: '📄',\r\n                        children: {\r\n                            'README.md': {\r\n                                type: 'file',\r\n                                icon: '📝',\r\n                                content:\r\n                                    '# Willkommen im Finder\\n\\nDies ist ein virtuelles Dateisystem.',\r\n                                size: 1024,\r\n                            },\r\n                        },\r\n                    },\r\n                    Downloads: {\r\n                        type: 'folder',\r\n                        icon: '⬇️',\r\n                        children: {},\r\n                    },\r\n                    Pictures: {\r\n                        type: 'folder',\r\n                        icon: '🖼️',\r\n                        children: {},\r\n                    },\r\n                    Music: {\r\n                        type: 'folder',\r\n                        icon: '🎵',\r\n                        children: {},\r\n                    },\r\n                    Videos: {\r\n                        type: 'folder',\r\n                        icon: '🎬',\r\n                        children: {},\r\n                    },\r\n                },\r\n            };\r\n\r\n            return {\r\n                [ROOT_FOLDER_NAME]: rootFolder,\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Initialize instance state\r\n         * @protected\r\n         */\r\n        _initializeState(initialState) {\r\n            return {\r\n                ...super._initializeState(initialState),\r\n                currentPath: initialState.currentPath || [],\r\n                currentView: initialState.currentView || 'computer',\r\n                viewMode: initialState.viewMode || 'list',\r\n                sortBy: initialState.sortBy || 'name',\r\n                sortOrder: initialState.sortOrder || 'asc',\r\n                favorites: initialState.favorites || [],\r\n                recentFiles: initialState.recentFiles || [],\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Render finder UI\r\n         * @protected\r\n         */\r\n        render() {\r\n            if (!this.container) return;\r\n\r\n            const html = `\r\n                <div class=\"finder-instance-wrapper flex-1 flex gap-0 min-h-0 overflow-hidden\">\r\n                    <!-- Sidebar -->\r\n                    <aside class=\"w-48 bg-gray-50 dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 overflow-y-auto\">\r\n                        <div class=\"py-2\">\r\n                            <!-- Favoriten Section -->\r\n                            <div class=\"px-3 py-1 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide\"\r\n                                data-i18n=\"finder.sidebar.favorites\">\r\n                                Favoriten\r\n                            </div>\r\n                            <button id=\"finder-sidebar-computer\" data-finder-sidebar-computer data-action=\"finder:switchView\" data-finder-view=\"computer\"\r\n                                class=\"finder-sidebar-item finder-sidebar-active\">\r\n                                <span class=\"finder-sidebar-icon\">💻</span>\r\n                                <span data-i18n=\"finder.sidebar.computer\">Computer</span>\r\n                            </button>\r\n                            <button id=\"finder-sidebar-recent\" data-finder-sidebar-recent data-action=\"finder:switchView\" data-finder-view=\"recent\"\r\n                                class=\"finder-sidebar-item\">\r\n                                <span class=\"finder-sidebar-icon\">🕒</span>\r\n                                <span data-i18n=\"finder.sidebar.recent\">Zuletzt geöffnet</span>\r\n                            </button>\r\n\r\n                            <!-- Orte Section -->\r\n                            <div class=\"px-3 py-1 mt-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide\"\r\n                                data-i18n=\"finder.sidebar.locations\">\r\n                                Orte\r\n                            </div>\r\n                            <button id=\"finder-sidebar-github\" data-finder-sidebar-github data-action=\"finder:switchView\" data-finder-view=\"github\"\r\n                                class=\"finder-sidebar-item\">\r\n                                <span class=\"finder-sidebar-icon\">📂</span>\r\n                                <span data-i18n=\"finder.sidebar.github\">GitHub Projekte</span>\r\n                            </button>\r\n                            <button id=\"finder-sidebar-favorites\" data-finder-sidebar-favorites data-action=\"finder:switchView\"\r\n                                data-finder-view=\"favorites\" class=\"finder-sidebar-item\">\r\n                                <span class=\"finder-sidebar-icon\">⭐</span>\r\n                                <span data-i18n=\"finder.sidebar.starred\">Mit Stern</span>\r\n                            </button>\r\n                        </div>\r\n                    </aside>\r\n\r\n                    <!-- Main Content Area -->\r\n                    <div class=\"flex-1 flex flex-col min-h-0\">\r\n                        <!-- Toolbar -->\r\n                        <div id=\"finder-toolbar\" data-finder-toolbar\r\n                            class=\"px-4 py-2 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2\">\r\n                            <button data-action=\"finder:navigateUp\" class=\"finder-toolbar-btn\" title=\"Zurück\"\r\n                                data-i18n-title=\"finder.toolbar.back\">\r\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                                    <path d=\"M19 12H5M12 19l-7-7 7-7\" />\r\n                                </svg>\r\n                            </button>\r\n                            <button data-action=\"finder:goRoot\" class=\"finder-toolbar-btn\" title=\"Vorwärts\"\r\n                                data-i18n-title=\"finder.toolbar.forward\">\r\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                                    <path d=\"M5 12h14M12 5l7 7-7 7\" />\r\n                                </svg>\r\n                            </button>\r\n                            <div class=\"flex-1 mx-2\">\r\n                                <div id=\"finder-path-breadcrumbs\" data-finder-breadcrumbs\r\n                                    class=\"flex items-center gap-1 text-sm text-gray-600 dark:text-gray-400\">\r\n                                    <!-- Breadcrumbs werden dynamisch generiert -->\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"flex gap-1\">\r\n                                <button data-action=\"finder:setViewMode\" data-view-mode=\"list\" class=\"finder-toolbar-btn\"\r\n                                    title=\"Listenansicht\" data-i18n-title=\"finder.toolbar.listView\">\r\n                                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                                        <path d=\"M3 4h18v2H3V4m0 7h18v2H3v-2m0 7h18v2H3v-2Z\" />\r\n                                    </svg>\r\n                                </button>\r\n                                <button data-action=\"finder:setViewMode\" data-view-mode=\"grid\" class=\"finder-toolbar-btn\"\r\n                                    title=\"Rasteransicht\" data-i18n-title=\"finder.toolbar.gridView\">\r\n                                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                                        <path d=\"M3 3h8v8H3V3m10 0h8v8h-8V3M3 13h8v8H3v-8m10 0h8v8h-8v-8Z\" />\r\n                                    </svg>\r\n                                </button>\r\n                            </div>\r\n                            <input id=\"finder-search-input\" data-finder-search type=\"text\" placeholder=\"Suchen\"\r\n                                data-i18n-placeholder=\"finder.toolbar.search\"\r\n                                class=\"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n                        </div>\r\n\r\n                        <!-- Content Area -->\r\n                        <div id=\"finder-content-area\" data-finder-content class=\"flex-1 overflow-auto bg-white dark:bg-gray-800 p-4\">\r\n                            <!-- Content wird dynamisch generiert -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            `;\r\n\r\n            this.container.innerHTML = html;\r\n\r\n            // Cache DOM references\r\n            this.domRefs.sidebarComputer = this.container.querySelector(\r\n                '[data-finder-sidebar-computer]'\r\n            );\r\n            this.domRefs.sidebarGithub = this.container.querySelector(\r\n                '[data-finder-sidebar-github]'\r\n            );\r\n            this.domRefs.sidebarFavorites = this.container.querySelector(\r\n                '[data-finder-sidebar-favorites]'\r\n            );\r\n            this.domRefs.sidebarRecent = this.container.querySelector(\r\n                '[data-finder-sidebar-recent]'\r\n            );\r\n            this.domRefs.breadcrumbs = this.container.querySelector('[data-finder-breadcrumbs]');\r\n            this.domRefs.contentArea = this.container.querySelector('[data-finder-content]');\r\n            this.domRefs.toolbar = this.container.querySelector('[data-finder-toolbar]');\r\n            this.domRefs.searchInput = this.container.querySelector('[data-finder-search]');\r\n        }\r\n\r\n        /**\r\n         * Attach event listeners\r\n         * @protected\r\n         */\r\n        attachEventListeners() {\r\n            if (!this.container) return;\r\n\r\n            // Delegate events on container\r\n            this.container.addEventListener('click', e => this._handleClick(e));\r\n            this.container.addEventListener('dblclick', e => this._handleDoubleClick(e));\r\n\r\n            // Initial render\r\n            this.navigateTo(this.state.currentPath, this.state.currentView);\r\n        }\r\n\r\n        /**\r\n         * Handle click events\r\n         * @private\r\n         */\r\n        _handleClick(e) {\r\n            const action = e.target.closest('[data-action]')?.dataset.action;\r\n            if (!action) return;\r\n\r\n            const handlers = {\r\n                'finder:switchView': () => {\r\n                    const view = e.target.closest('[data-finder-view]')?.dataset.finderView;\r\n                    if (view) this.switchView(view);\r\n                },\r\n                'finder:navigateUp': () => this.navigateUp(),\r\n                'finder:goRoot': () => this.navigateTo([], this.currentView),\r\n                'finder:navigateToPath': () => {\r\n                    const path = e.target.closest('[data-path]')?.dataset.path;\r\n                    if (path) this.navigateTo(path);\r\n                },\r\n                'finder:setSortBy': () => {\r\n                    const sortBy = e.target.closest('[data-sort-by]')?.dataset.sortBy;\r\n                    if (sortBy) this.setSortBy(sortBy);\r\n                },\r\n                'finder:setViewMode': () => {\r\n                    const mode = e.target.closest('[data-view-mode]')?.dataset.viewMode;\r\n                    if (mode) this.setViewMode(mode);\r\n                },\r\n            };\r\n\r\n            if (handlers[action]) {\r\n                handlers[action]();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Handle double click events\r\n         * @private\r\n         */\r\n        _handleDoubleClick(e) {\r\n            const item = e.target.closest('[data-action-dblclick]');\r\n            if (!item || item.dataset.actionDblclick !== 'finder:openItem') return;\r\n\r\n            const name = item.dataset.itemName;\r\n            const type = item.dataset.itemType;\r\n            if (name && type) {\r\n                this.openItem(name, type);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Navigate to path\r\n         */\r\n        navigateTo(path, view = null) {\r\n            if (view !== null) {\r\n                this.currentView = view;\r\n            }\r\n\r\n            if (typeof path === 'string') {\r\n                this.currentPath = path === '' ? [] : path.split('/');\r\n            } else if (Array.isArray(path)) {\r\n                this.currentPath = [...path];\r\n            }\r\n\r\n            this.updateSidebarSelection();\r\n            this.renderBreadcrumbs();\r\n            this.renderContent();\r\n            this.updateState({\r\n                currentPath: this.currentPath,\r\n                currentView: this.currentView,\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Navigate up one level\r\n         */\r\n        navigateUp() {\r\n            if (this.currentPath.length > 0) {\r\n                this.currentPath.pop();\r\n                this.navigateTo(this.currentPath);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Navigate to folder\r\n         */\r\n        navigateToFolder(folderName) {\r\n            this.currentPath.push(folderName);\r\n            this.navigateTo(this.currentPath);\r\n        }\r\n\r\n        /**\r\n         * Switch view\r\n         */\r\n        switchView(view) {\r\n            this.currentPath = [];\r\n            this.navigateTo([], view);\r\n        }\r\n\r\n        /**\r\n         * Update sidebar selection\r\n         */\r\n        updateSidebarSelection() {\r\n            const refs = this.domRefs;\r\n            if (!refs) return;\r\n\r\n            // Remove all active marks\r\n            [\r\n                refs.sidebarComputer,\r\n                refs.sidebarGithub,\r\n                refs.sidebarFavorites,\r\n                refs.sidebarRecent,\r\n            ].forEach(el => {\r\n                if (el) el.classList.remove('finder-sidebar-active');\r\n            });\r\n\r\n            // Mark current view\r\n            switch (this.currentView) {\r\n                case 'computer':\r\n                    if (refs.sidebarComputer)\r\n                        refs.sidebarComputer.classList.add('finder-sidebar-active');\r\n                    break;\r\n                case 'github':\r\n                    if (refs.sidebarGithub)\r\n                        refs.sidebarGithub.classList.add('finder-sidebar-active');\r\n                    break;\r\n                case 'favorites':\r\n                    if (refs.sidebarFavorites)\r\n                        refs.sidebarFavorites.classList.add('finder-sidebar-active');\r\n                    break;\r\n                case 'recent':\r\n                    if (refs.sidebarRecent)\r\n                        refs.sidebarRecent.classList.add('finder-sidebar-active');\r\n                    break;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Render breadcrumbs\r\n         */\r\n        renderBreadcrumbs() {\r\n            if (!this.domRefs.breadcrumbs) return;\r\n\r\n            const parts = [];\r\n\r\n            // View label\r\n            let viewLabel = '';\r\n            switch (this.currentView) {\r\n                case 'computer':\r\n                    viewLabel = 'Computer';\r\n                    break;\r\n                case 'github':\r\n                    viewLabel = 'GitHub Projekte';\r\n                    break;\r\n                case 'favorites':\r\n                    viewLabel = 'Favoriten';\r\n                    break;\r\n                case 'recent':\r\n                    viewLabel = 'Zuletzt geöffnet';\r\n                    break;\r\n            }\r\n\r\n            parts.push(\r\n                `<button class=\"finder-breadcrumb-item\" data-action=\"finder:goRoot\">${viewLabel}</button>`\r\n            );\r\n\r\n            // Path parts\r\n            this.currentPath.forEach((part, index) => {\r\n                // Skip root folder name if we're in computer view and it's the first part\r\n                if (index === 0 && this.currentView === 'computer' && part === ROOT_FOLDER_NAME) {\r\n                    return;\r\n                }\r\n\r\n                const pathUpToHere = this.currentPath.slice(0, index + 1);\r\n                parts.push('<span class=\"finder-breadcrumb-separator\">›</span>');\r\n                parts.push(\r\n                    `<button class=\"finder-breadcrumb-item\" data-action=\"finder:navigateToPath\" data-path=\"${pathUpToHere.join('/')}\">${part}</button>`\r\n                );\r\n            });\r\n\r\n            this.domRefs.breadcrumbs.innerHTML = parts.join('');\r\n        }\r\n\r\n        /**\r\n         * Render content area\r\n         */\r\n        renderContent() {\r\n            if (!this.domRefs.contentArea) return;\r\n\r\n            // Special handling for GitHub view (async loading)\r\n            if (this.currentView === 'github') {\r\n                this.renderGithubContent();\r\n                return;\r\n            }\r\n\r\n            const items = this.getCurrentItems();\r\n\r\n            if (items.length === 0) {\r\n                this.domRefs.contentArea.innerHTML = `\r\n                    <div class=\"finder-empty-state\">\r\n                        <div class=\"text-6xl mb-4\">📂</div>\r\n                        <div class=\"text-gray-500 dark:text-gray-400\">Dieser Ordner ist leer</div>\r\n                    </div>\r\n                `;\r\n                return;\r\n            }\r\n\r\n            // Sort items\r\n            const sortedItems = this.sortItems(items);\r\n\r\n            // Render based on view mode\r\n            switch (this.viewMode) {\r\n                case 'list':\r\n                    this.renderListView(sortedItems);\r\n                    break;\r\n                case 'grid':\r\n                    this.renderGridView(sortedItems);\r\n                    break;\r\n                case 'columns':\r\n                    this.renderListView(sortedItems); // Fallback to list for now\r\n                    break;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get current items based on view and path\r\n         */\r\n        getCurrentItems() {\r\n            switch (this.currentView) {\r\n                case 'computer':\r\n                    return this.getComputerItems();\r\n                case 'github':\r\n                    return this.getGithubItems();\r\n                case 'favorites':\r\n                    return this.getFavoriteItems();\r\n                case 'recent':\r\n                    return this.getRecentItems();\r\n                default:\r\n                    return [];\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get computer items\r\n         */\r\n        getComputerItems() {\r\n            let current = this.virtualFileSystem;\r\n\r\n            for (const pathPart of this.currentPath) {\r\n                if (current[pathPart] && current[pathPart].children) {\r\n                    current = current[pathPart].children;\r\n                } else {\r\n                    return [];\r\n                }\r\n            }\r\n\r\n            return Object.entries(current).map(([name, item]) => ({\r\n                name,\r\n                type: item.type,\r\n                icon: item.icon || (item.type === 'folder' ? '📁' : '📄'),\r\n                size: item.size || 0,\r\n                modified: item.modified || new Date().toISOString(),\r\n            }));\r\n        }\r\n\r\n        /**\r\n         * Get GitHub items (placeholder - simplified from finder.js)\r\n         */\r\n        getGithubItems() {\r\n            // Fallback (should be handled by renderGithubContent)\r\n            return [];\r\n        }\r\n\r\n        /**\r\n         * Get favorite items\r\n         */\r\n        getFavoriteItems() {\r\n            return Array.from(this.favorites).map(path => ({\r\n                name: path.split('/').pop(),\r\n                type: 'favorite',\r\n                icon: '⭐',\r\n                path,\r\n            }));\r\n        }\r\n\r\n        /**\r\n         * Get recent items\r\n         */\r\n        getRecentItems() {\r\n            return this.recentFiles.map(file => ({\r\n                name: file.name,\r\n                type: 'recent',\r\n                icon: file.icon || '📄',\r\n                path: file.path,\r\n                modified: file.modified,\r\n            }));\r\n        }\r\n\r\n        /**\r\n         * Sort items\r\n         */\r\n        sortItems(items) {\r\n            const sorted = [...items];\r\n\r\n            sorted.sort((a, b) => {\r\n                // Folders first\r\n                if (a.type === 'folder' && b.type !== 'folder') return -1;\r\n                if (a.type !== 'folder' && b.type === 'folder') return 1;\r\n\r\n                // Then by sortBy\r\n                let comparison = 0;\r\n                switch (this.sortBy) {\r\n                    case 'name':\r\n                        comparison = a.name.localeCompare(b.name);\r\n                        break;\r\n                    case 'size':\r\n                        comparison = (a.size || 0) - (b.size || 0);\r\n                        break;\r\n                    case 'date':\r\n                        comparison = new Date(b.modified || 0) - new Date(a.modified || 0);\r\n                        break;\r\n                    case 'type':\r\n                        comparison = (a.type || '').localeCompare(b.type || '');\r\n                        break;\r\n                }\r\n\r\n                return this.sortOrder === 'asc' ? comparison : -comparison;\r\n            });\r\n\r\n            return sorted;\r\n        }\r\n\r\n        /**\r\n         * Render list view\r\n         */\r\n        renderListView(items) {\r\n            const html = `\r\n                <div id=\"finder-list-container\">\r\n                <table class=\"finder-list-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th data-action=\"finder:setSortBy\" data-sort-by=\"name\">Name</th>\r\n                            <th data-action=\"finder:setSortBy\" data-sort-by=\"size\">Größe</th>\r\n                            <th data-action=\"finder:setSortBy\" data-sort-by=\"date\">Geändert</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        ${items\r\n        .map(\r\n            item => `\r\n                            <tr class=\"finder-list-item\" data-action-dblclick=\"finder:openItem\" data-item-name=\"${item.name}\" data-item-type=\"${item.type}\">\r\n                                <td>\r\n                                    <span class=\"finder-item-icon\">${item.icon}</span>\r\n                                    <span class=\"finder-item-name\">${item.name}</span>\r\n                                </td>\r\n                                <td>${this.formatSize(item.size)}</td>\r\n                                <td>${this.formatDate(item.modified)}</td>\r\n                            </tr>\r\n                        `\r\n        )\r\n        .join('')}\r\n                    </tbody>\r\n                </table>\r\n                </div>\r\n            `;\r\n\r\n            this.domRefs.contentArea.innerHTML = html;\r\n        }\r\n\r\n        /**\r\n         * Render grid view\r\n         */\r\n        renderGridView(items) {\r\n            const html = `\r\n                <div id=\"finder-list-container\">\r\n                <div class=\"finder-grid-container\">\r\n                    ${items\r\n        .map(\r\n            item => `\r\n                        <div class=\"finder-grid-item\" data-action-dblclick=\"finder:openItem\" data-item-name=\"${item.name}\" data-item-type=\"${item.type}\">\r\n                            <div class=\"finder-grid-icon\">${item.icon}</div>\r\n                            <div class=\"finder-grid-name\">${item.name}</div>\r\n                        </div>\r\n                    `\r\n        )\r\n        .join('')}\r\n                </div>\r\n                </div>\r\n            `;\r\n\r\n            this.domRefs.contentArea.innerHTML = html;\r\n        }\r\n\r\n        /**\r\n         * Open item\r\n         */\r\n        openItem(name, type) {\r\n            if (type === 'folder') {\r\n                this.navigateToFolder(name);\r\n            } else if (type === 'file') {\r\n                // Add to recent files\r\n                this.addToRecent(name);\r\n                // Emit event for file opening (can be handled by parent)\r\n                this.emit('fileOpened', { name, path: [...this.currentPath, name].join('/') });\r\n\r\n                // If in GitHub view and image file, open Preview\r\n                if (this.currentView === 'github') {\r\n                    const item = this.lastGithubItemsMap.get(name);\r\n                    const isImage = /\\.(png|jpe?g|gif|bmp|webp|svg)$/i.test(name);\r\n                    if (item && isImage && item.download_url) {\r\n                        // Collect all images in current folder\r\n                        const allImages = [];\r\n                        let startIndex = 0;\r\n                        let idx = 0;\r\n                        this.lastGithubItemsMap.forEach((entry, key) => {\r\n                            if (/\\.(png|jpe?g|gif|bmp|webp|svg)$/i.test(key) && entry.download_url) {\r\n                                if (key === name) startIndex = idx;\r\n                                allImages.push(entry.download_url);\r\n                                idx++;\r\n                            }\r\n                        });\r\n\r\n                        // Open Preview with all images\r\n                        if (window.PreviewInstanceManager && typeof window.PreviewInstanceManager.openImages === 'function') {\r\n                            const fullPath = [...this.currentPath, name].join('/');\r\n                            window.PreviewInstanceManager.openImages(allImages, startIndex, fullPath);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Render GitHub view with async fetching and caching\r\n         */\r\n        async renderGithubContent() {\r\n            const el = this.domRefs.contentArea;\r\n            if (!el) return;\r\n\r\n            // Root (list repos)\r\n            if (this.currentPath.length === 0) {\r\n                // Loading placeholder\r\n                el.innerHTML = '<div class=\"finder-empty-state\">Lade Repositories…</div>';\r\n                const repos = await this.fetchGithubRepos();\r\n                this.lastGithubItemsMap.clear();\r\n                const items = (repos || []).map(repo => ({\r\n                    name: repo.name,\r\n                    type: 'folder',\r\n                    icon: '📦',\r\n                }));\r\n                items.forEach(it => this.lastGithubItemsMap.set(it.name, it));\r\n                if (this.githubError && items.length === 0) {\r\n                    el.innerHTML =\r\n                        '<div class=\"finder-empty-state text-center\"><div class=\"text-2xl mb-2\">⚠️</div><div>Repositories could not be loaded (Repos konnten nicht geladen werden). Possible Rate Limit.</div></div>';\r\n                } else if (items.length === 0) {\r\n                    el.innerHTML =\r\n                        '<div class=\"finder-empty-state text-center\">Keine öffentlichen Repositories gefunden</div>';\r\n                } else {\r\n                    this.renderListView(items);\r\n                }\r\n                return;\r\n            }\r\n\r\n            // Repo and subpaths\r\n            const repo = this.currentPath[0];\r\n            const subPathParts = this.currentPath.slice(1);\r\n            const subPath = subPathParts.join('/');\r\n\r\n            el.innerHTML = '<div class=\"finder-empty-state\">Lade Inhalte…</div>';\r\n            const contents = await this.fetchGithubContents(repo, subPath);\r\n            this.lastGithubItemsMap.clear();\r\n            const items = (contents || []).map(entry => {\r\n                const isDir = entry.type === 'dir';\r\n                return {\r\n                    name: entry.name,\r\n                    type: isDir ? 'folder' : 'file',\r\n                    icon: isDir ? '📁' : '📄',\r\n                    size: entry.size || 0,\r\n                    download_url: entry.download_url || null,\r\n                };\r\n            });\r\n            items.forEach(it => this.lastGithubItemsMap.set(it.name, it));\r\n            if (this.githubError && items.length === 0) {\r\n                el.innerHTML =\r\n                    '<div class=\"finder-empty-state text-center\"><div class=\"text-2xl mb-2\">⚠️</div><div>Repositories could not be loaded (Repos konnten nicht geladen werden). Possible Rate Limit.</div></div>';\r\n            } else if (items.length === 0) {\r\n                el.innerHTML =\r\n                    '<div class=\"finder-empty-state text-center\">Dieser Ordner ist leer</div>';\r\n            } else {\r\n                this.renderListView(items);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Fetch GitHub repos for configured user\r\n         */\r\n        async fetchGithubRepos() {\r\n            const GITHUB_USERNAME = 'Marormur';\r\n            try {\r\n                // Simple in-memory cache per instance\r\n                if (Array.isArray(this.githubRepos) && this.githubRepos.length) {\r\n                    return this.githubRepos;\r\n                }\r\n                const res = await fetch(`https://api.github.com/users/${GITHUB_USERNAME}/repos`, {\r\n                    headers: { Accept: 'application/vnd.github.v3+json' },\r\n                });\r\n                if (!res.ok) throw new Error('GitHub repos fetch failed');\r\n                const data = await res.json();\r\n                this.githubRepos = data || [];\r\n                this.githubError = false;\r\n                this.githubErrorMessage = '';\r\n                return this.githubRepos;\r\n            } catch (e) {\r\n                console.warn('GitHub repos error:', e);\r\n                this.githubError = true;\r\n                this.githubErrorMessage = 'Repositories could not be loaded';\r\n                return [];\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Fetch contents (files/folders) for a given repo and subPath\r\n         */\r\n        async fetchGithubContents(repo, subPath = '') {\r\n            try {\r\n                const key = `${repo}:${subPath}`;\r\n                if (this.githubContentCache.has(key)) {\r\n                    return this.githubContentCache.get(key);\r\n                }\r\n                const base = `https://api.github.com/repos/Marormur/${repo}/contents`;\r\n                const url = subPath ? `${base}/${this._encodeGithubPath(subPath)}` : base;\r\n                const res = await fetch(url, {\r\n                    headers: { Accept: 'application/vnd.github.v3+json' },\r\n                });\r\n                if (!res.ok) throw new Error('GitHub contents fetch failed');\r\n                const data = await res.json();\r\n                this.githubContentCache.set(key, data || []);\r\n                this.githubError = false;\r\n                this.githubErrorMessage = '';\r\n                return data;\r\n            } catch (e) {\r\n                console.warn('GitHub contents error:', e);\r\n                this.githubError = true;\r\n                this.githubErrorMessage = 'Repositories could not be loaded';\r\n                return [];\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Encode a GitHub path by encoding segments but keeping '/'\r\n         */\r\n        _encodeGithubPath(subPath) {\r\n            if (!subPath) return '';\r\n            return subPath\r\n                .split('/')\r\n                .filter(Boolean)\r\n                .map(seg => encodeURIComponent(seg))\r\n                .join('/');\r\n        }\r\n\r\n        /**\r\n         * Open image viewer modal with given src\r\n         */\r\n        openImageViewer({ src, name }) {\r\n            try {\r\n                const img = document.getElementById('image-viewer');\r\n                const info = document.getElementById('image-info');\r\n                const placeholder = document.getElementById('image-placeholder');\r\n                if (info) {\r\n                    info.textContent = name || '';\r\n                    info.classList.remove('hidden');\r\n                }\r\n                if (placeholder) placeholder.classList.add('hidden');\r\n                if (img) {\r\n                    img.src = src;\r\n                    img.classList.remove('hidden');\r\n                }\r\n                // Notify Photos App about external image if available\r\n                if (window.PhotosApp && typeof window.PhotosApp.showExternalImage === 'function') {\r\n                    window.PhotosApp.showExternalImage({ src, name });\r\n                }\r\n                if (window.API?.window?.open) {\r\n                    window.API.window.open('image-modal');\r\n                } else {\r\n                    const modal = document.getElementById('image-modal');\r\n                    if (modal) modal.classList.remove('hidden');\r\n                }\r\n            } catch (e) {\r\n                console.warn('Failed to open image viewer:', e);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Add to recent files\r\n         */\r\n        addToRecent(name) {\r\n            const fullPath = [...this.currentPath, name].join('/');\r\n            this.recentFiles.unshift({\r\n                name,\r\n                path: fullPath,\r\n                icon: '📄',\r\n                modified: new Date().toISOString(),\r\n            });\r\n\r\n            // Limit to 20 items\r\n            this.recentFiles = this.recentFiles.slice(0, 20);\r\n            this.updateState({ recentFiles: this.recentFiles });\r\n        }\r\n\r\n        /**\r\n         * Set sort by\r\n         */\r\n        setSortBy(field) {\r\n            if (this.sortBy === field) {\r\n                this.sortOrder = this.sortOrder === 'asc' ? 'desc' : 'asc';\r\n            } else {\r\n                this.sortBy = field;\r\n                this.sortOrder = 'asc';\r\n            }\r\n            this.renderContent();\r\n            this.updateState({ sortBy: this.sortBy, sortOrder: this.sortOrder });\r\n        }\r\n\r\n        /**\r\n         * Set view mode\r\n         */\r\n        setViewMode(mode) {\r\n            this.viewMode = mode;\r\n            this.renderContent();\r\n            this.updateState({ viewMode: this.viewMode });\r\n        }\r\n\r\n        /**\r\n         * Format size\r\n         */\r\n        formatSize(bytes) {\r\n            if (!bytes || bytes === 0) return '-';\r\n            if (bytes < 1024) return bytes + ' B';\r\n            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\r\n            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\r\n        }\r\n\r\n        /**\r\n         * Format date\r\n         */\r\n        formatDate(dateStr) {\r\n            if (!dateStr) return '-';\r\n            const date = new Date(dateStr);\r\n            return date.toLocaleDateString('de-DE', {\r\n                day: '2-digit',\r\n                month: '2-digit',\r\n                year: 'numeric',\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Serialize finder state\r\n         */\r\n        serialize() {\r\n            return {\r\n                ...super.serialize(),\r\n                currentPath: this.currentPath,\r\n                currentView: this.currentView,\r\n                viewMode: this.viewMode,\r\n                sortBy: this.sortBy,\r\n                sortOrder: this.sortOrder,\r\n                favorites: Array.from(this.favorites),\r\n                recentFiles: this.recentFiles,\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Restore finder from saved state\r\n         */\r\n        deserialize(data) {\r\n            super.deserialize(data);\r\n\r\n            if (data.currentPath) {\r\n                this.currentPath = data.currentPath;\r\n            }\r\n\r\n            if (data.currentView) {\r\n                this.currentView = data.currentView;\r\n            }\r\n\r\n            if (data.viewMode) {\r\n                this.viewMode = data.viewMode;\r\n            }\r\n\r\n            if (data.sortBy) {\r\n                this.sortBy = data.sortBy;\r\n            }\r\n\r\n            if (data.sortOrder) {\r\n                this.sortOrder = data.sortOrder;\r\n            }\r\n\r\n            if (data.favorites) {\r\n                this.favorites = new Set(data.favorites);\r\n            }\r\n\r\n            if (data.recentFiles) {\r\n                this.recentFiles = data.recentFiles;\r\n            }\r\n\r\n            // Re-render\r\n            this.navigateTo(this.currentPath, this.currentView);\r\n        }\r\n\r\n        /**\r\n         * Focus finder\r\n         */\r\n        focus() {\r\n            super.focus();\r\n            if (this.domRefs.searchInput) {\r\n                // Don't auto-focus search input, just bring to front\r\n            }\r\n        }\r\n    }\r\n\r\n    // Export\r\n    window.FinderInstance = FinderInstance;\r\n\r\n    // Create Finder Instance Manager\r\n    if (window.InstanceManager) {\r\n        window.FinderInstanceManager = new window.InstanceManager({\r\n            type: 'finder',\r\n            instanceClass: FinderInstance,\r\n            maxInstances: 0, // Unlimited\r\n            createContainer: function (instanceId) {\r\n                // Create container and append to finder modal container\r\n                const finderModalContainer = document.getElementById('finder-container');\r\n                if (!finderModalContainer) {\r\n                    console.error('Finder container not found');\r\n                    return null;\r\n                }\r\n\r\n                const container = document.createElement('div');\r\n                container.id = `${instanceId}-container`;\r\n                // Make this container a flex column so the rendered content's flex-1 can expand\r\n                container.className = 'finder-instance-container h-full flex flex-col min-h-0';\r\n\r\n                // Initially hidden (will be shown by integration layer)\r\n                container.classList.add('hidden');\r\n\r\n                finderModalContainer.appendChild(container);\r\n                return container;\r\n            },\r\n        });\r\n    }\r\n})();\r\n"]}