{"version":3,"file":"finder-instance.js","sourceRoot":"","sources":["../../src/ts/legacy/finder-instance.js"],"names":[],"mappings":"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","sourcesContent":["console.log('FinderInstance loaded');\n\n/**\n * FinderInstance - Multi-Instance fähiger Finder-Implementierung\n *\n * Ermöglicht mehrere Finder-Fenster mit isolierten States\n * Zeigt, wie das Finder-Modul für Multi-Instance umgebaut werden kann\n */\n(function () {\n    'use strict';\n\n    // Constants\n    const ROOT_FOLDER_NAME = 'Computer';\n\n    /**\n     * Single Finder Instance\n     * Extends BaseWindowInstance to support multiple finder windows\n     */\n    class FinderInstance extends window.BaseWindowInstance {\n        constructor(config) {\n            super({\n                ...config,\n                type: 'finder',\n            });\n\n            // Finder-specific state\n            this.currentPath = [];\n            this.currentView = 'computer'; // 'computer', 'github', 'favorites', 'recent'\n            this.selectedItems = new Set();\n            this.viewMode = 'list'; // 'list', 'grid', 'columns'\n            this.sortBy = 'name'; // 'name', 'date', 'size', 'type'\n            this.sortOrder = 'asc'; // 'asc', 'desc'\n            this.githubRepos = [];\n            this.githubLoading = false;\n            this.githubError = false;\n            this.githubErrorMessage = '';\n            this.lastGithubItemsMap = new Map();\n            this.favorites = new Set();\n            this.recentFiles = [];\n\n            // DOM References (per instance)\n            this.domRefs = {\n                sidebarComputer: null,\n                sidebarGithub: null,\n                sidebarFavorites: null,\n                sidebarRecent: null,\n                breadcrumbs: null,\n                contentArea: null,\n                toolbar: null,\n                searchInput: null,\n            };\n\n            // GitHub cache\n            this.githubContentCache = new Map();\n\n            // Virtual file system (per instance)\n            this.virtualFileSystem = this._createVirtualFileSystem();\n        }\n\n        /**\n         * Create virtual file system for this instance\n         * @private\n         */\n        _createVirtualFileSystem() {\n            const rootFolder = {\n                type: 'folder',\n                icon: '💻',\n                children: {\n                    Documents: {\n                        type: 'folder',\n                        icon: '📄',\n                        children: {\n                            'README.md': {\n                                type: 'file',\n                                icon: '📝',\n                                content:\n                                    '# Willkommen im Finder\\n\\nDies ist ein virtuelles Dateisystem.',\n                                size: 1024,\n                            },\n                        },\n                    },\n                    Downloads: {\n                        type: 'folder',\n                        icon: '⬇️',\n                        children: {},\n                    },\n                    Pictures: {\n                        type: 'folder',\n                        icon: '🖼️',\n                        children: {},\n                    },\n                    Music: {\n                        type: 'folder',\n                        icon: '🎵',\n                        children: {},\n                    },\n                    Videos: {\n                        type: 'folder',\n                        icon: '🎬',\n                        children: {},\n                    },\n                },\n            };\n\n            return {\n                [ROOT_FOLDER_NAME]: rootFolder,\n            };\n        }\n\n        /**\n         * Initialize instance state\n         * @protected\n         */\n        _initializeState(initialState) {\n            return {\n                ...super._initializeState(initialState),\n                currentPath: initialState.currentPath || [],\n                currentView: initialState.currentView || 'computer',\n                viewMode: initialState.viewMode || 'list',\n                sortBy: initialState.sortBy || 'name',\n                sortOrder: initialState.sortOrder || 'asc',\n                favorites: initialState.favorites || [],\n                recentFiles: initialState.recentFiles || [],\n            };\n        }\n\n        /**\n         * Render finder UI\n         * @protected\n         */\n        render() {\n            if (!this.container) return;\n\n            const html = `\n                <div class=\"finder-instance-wrapper flex-1 flex gap-0 min-h-0 overflow-hidden\">\n                    <!-- Sidebar -->\n                    <aside class=\"w-48 bg-gray-50 dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 overflow-y-auto\">\n                        <div class=\"py-2\">\n                            <!-- Favoriten Section -->\n                            <div class=\"px-3 py-1 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide\"\n                                data-i18n=\"finder.sidebar.favorites\">\n                                Favoriten\n                            </div>\n                            <button id=\"finder-sidebar-computer\" data-finder-sidebar-computer data-action=\"finder:switchView\" data-finder-view=\"computer\"\n                                class=\"finder-sidebar-item finder-sidebar-active\">\n                                <span class=\"finder-sidebar-icon\">💻</span>\n                                <span data-i18n=\"finder.sidebar.computer\">Computer</span>\n                            </button>\n                            <button id=\"finder-sidebar-recent\" data-finder-sidebar-recent data-action=\"finder:switchView\" data-finder-view=\"recent\"\n                                class=\"finder-sidebar-item\">\n                                <span class=\"finder-sidebar-icon\">🕒</span>\n                                <span data-i18n=\"finder.sidebar.recent\">Zuletzt geöffnet</span>\n                            </button>\n\n                            <!-- Orte Section -->\n                            <div class=\"px-3 py-1 mt-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide\"\n                                data-i18n=\"finder.sidebar.locations\">\n                                Orte\n                            </div>\n                            <button id=\"finder-sidebar-github\" data-finder-sidebar-github data-action=\"finder:switchView\" data-finder-view=\"github\"\n                                class=\"finder-sidebar-item\">\n                                <span class=\"finder-sidebar-icon\">📂</span>\n                                <span data-i18n=\"finder.sidebar.github\">GitHub Projekte</span>\n                            </button>\n                            <button id=\"finder-sidebar-favorites\" data-finder-sidebar-favorites data-action=\"finder:switchView\"\n                                data-finder-view=\"favorites\" class=\"finder-sidebar-item\">\n                                <span class=\"finder-sidebar-icon\">⭐</span>\n                                <span data-i18n=\"finder.sidebar.starred\">Mit Stern</span>\n                            </button>\n                        </div>\n                    </aside>\n\n                    <!-- Main Content Area -->\n                    <div class=\"flex-1 flex flex-col min-h-0\">\n                        <!-- Toolbar -->\n                        <div id=\"finder-toolbar\" data-finder-toolbar\n                            class=\"px-4 py-2 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2\">\n                            <button data-action=\"finder:navigateUp\" class=\"finder-toolbar-btn\" title=\"Zurück\"\n                                data-i18n-title=\"finder.toolbar.back\">\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                                    <path d=\"M19 12H5M12 19l-7-7 7-7\" />\n                                </svg>\n                            </button>\n                            <button data-action=\"finder:goRoot\" class=\"finder-toolbar-btn\" title=\"Vorwärts\"\n                                data-i18n-title=\"finder.toolbar.forward\">\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                                    <path d=\"M5 12h14M12 5l7 7-7 7\" />\n                                </svg>\n                            </button>\n                            <div class=\"flex-1 mx-2\">\n                                <div id=\"finder-path-breadcrumbs\" data-finder-breadcrumbs\n                                    class=\"flex items-center gap-1 text-sm text-gray-600 dark:text-gray-400\">\n                                    <!-- Breadcrumbs werden dynamisch generiert -->\n                                </div>\n                            </div>\n                            <div class=\"flex gap-1\">\n                                <button data-action=\"finder:setViewMode\" data-view-mode=\"list\" class=\"finder-toolbar-btn\"\n                                    title=\"Listenansicht\" data-i18n-title=\"finder.toolbar.listView\">\n                                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                                        <path d=\"M3 4h18v2H3V4m0 7h18v2H3v-2m0 7h18v2H3v-2Z\" />\n                                    </svg>\n                                </button>\n                                <button data-action=\"finder:setViewMode\" data-view-mode=\"grid\" class=\"finder-toolbar-btn\"\n                                    title=\"Rasteransicht\" data-i18n-title=\"finder.toolbar.gridView\">\n                                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                                        <path d=\"M3 3h8v8H3V3m10 0h8v8h-8V3M3 13h8v8H3v-8m10 0h8v8h-8v-8Z\" />\n                                    </svg>\n                                </button>\n                            </div>\n                            <input id=\"finder-search-input\" data-finder-search type=\"text\" placeholder=\"Suchen\"\n                                data-i18n-placeholder=\"finder.toolbar.search\"\n                                class=\"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                        </div>\n\n                        <!-- Content Area -->\n                        <div id=\"finder-content-area\" data-finder-content class=\"flex-1 overflow-auto bg-white dark:bg-gray-800 p-4\">\n                            <!-- Content wird dynamisch generiert -->\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            this.container.innerHTML = html;\n\n            // Cache DOM references\n            this.domRefs.sidebarComputer = this.container.querySelector(\n                '[data-finder-sidebar-computer]'\n            );\n            this.domRefs.sidebarGithub = this.container.querySelector(\n                '[data-finder-sidebar-github]'\n            );\n            this.domRefs.sidebarFavorites = this.container.querySelector(\n                '[data-finder-sidebar-favorites]'\n            );\n            this.domRefs.sidebarRecent = this.container.querySelector(\n                '[data-finder-sidebar-recent]'\n            );\n            this.domRefs.breadcrumbs = this.container.querySelector('[data-finder-breadcrumbs]');\n            this.domRefs.contentArea = this.container.querySelector('[data-finder-content]');\n            this.domRefs.toolbar = this.container.querySelector('[data-finder-toolbar]');\n            this.domRefs.searchInput = this.container.querySelector('[data-finder-search]');\n        }\n\n        /**\n         * Attach event listeners\n         * @protected\n         */\n        attachEventListeners() {\n            if (!this.container) return;\n\n            // Delegate events on container\n            this.container.addEventListener('click', e => this._handleClick(e));\n            this.container.addEventListener('dblclick', e => this._handleDoubleClick(e));\n\n            // Initial render\n            this.navigateTo(this.state.currentPath, this.state.currentView);\n        }\n\n        /**\n         * Handle click events\n         * @private\n         */\n        _handleClick(e) {\n            const action = e.target.closest('[data-action]')?.dataset.action;\n            if (!action) return;\n\n            const handlers = {\n                'finder:switchView': () => {\n                    const view = e.target.closest('[data-finder-view]')?.dataset.finderView;\n                    if (view) this.switchView(view);\n                },\n                'finder:navigateUp': () => this.navigateUp(),\n                'finder:goRoot': () => this.navigateTo([], this.currentView),\n                'finder:navigateToPath': () => {\n                    const path = e.target.closest('[data-path]')?.dataset.path;\n                    if (path) this.navigateTo(path);\n                },\n                'finder:setSortBy': () => {\n                    const sortBy = e.target.closest('[data-sort-by]')?.dataset.sortBy;\n                    if (sortBy) this.setSortBy(sortBy);\n                },\n                'finder:setViewMode': () => {\n                    const mode = e.target.closest('[data-view-mode]')?.dataset.viewMode;\n                    if (mode) this.setViewMode(mode);\n                },\n            };\n\n            if (handlers[action]) {\n                handlers[action]();\n            }\n        }\n\n        /**\n         * Handle double click events\n         * @private\n         */\n        _handleDoubleClick(e) {\n            const item = e.target.closest('[data-action-dblclick]');\n            if (!item || item.dataset.actionDblclick !== 'finder:openItem') return;\n\n            const name = item.dataset.itemName;\n            const type = item.dataset.itemType;\n            if (name && type) {\n                this.openItem(name, type);\n            }\n        }\n\n        /**\n         * Navigate to path\n         */\n        navigateTo(path, view = null) {\n            if (view !== null) {\n                this.currentView = view;\n            }\n\n            if (typeof path === 'string') {\n                this.currentPath = path === '' ? [] : path.split('/');\n            } else if (Array.isArray(path)) {\n                this.currentPath = [...path];\n            }\n\n            this.updateSidebarSelection();\n            this.renderBreadcrumbs();\n            this.renderContent();\n            this.updateState({\n                currentPath: this.currentPath,\n                currentView: this.currentView,\n            });\n        }\n\n        /**\n         * Navigate up one level\n         */\n        navigateUp() {\n            if (this.currentPath.length > 0) {\n                this.currentPath.pop();\n                this.navigateTo(this.currentPath);\n            }\n        }\n\n        /**\n         * Navigate to folder\n         */\n        navigateToFolder(folderName) {\n            this.currentPath.push(folderName);\n            this.navigateTo(this.currentPath);\n        }\n\n        /**\n         * Switch view\n         */\n        switchView(view) {\n            this.currentPath = [];\n            this.navigateTo([], view);\n        }\n\n        /**\n         * Update sidebar selection\n         */\n        updateSidebarSelection() {\n            const refs = this.domRefs;\n            if (!refs) return;\n\n            // Remove all active marks\n            [\n                refs.sidebarComputer,\n                refs.sidebarGithub,\n                refs.sidebarFavorites,\n                refs.sidebarRecent,\n            ].forEach(el => {\n                if (el) el.classList.remove('finder-sidebar-active');\n            });\n\n            // Mark current view\n            switch (this.currentView) {\n                case 'computer':\n                    if (refs.sidebarComputer)\n                        refs.sidebarComputer.classList.add('finder-sidebar-active');\n                    break;\n                case 'github':\n                    if (refs.sidebarGithub)\n                        refs.sidebarGithub.classList.add('finder-sidebar-active');\n                    break;\n                case 'favorites':\n                    if (refs.sidebarFavorites)\n                        refs.sidebarFavorites.classList.add('finder-sidebar-active');\n                    break;\n                case 'recent':\n                    if (refs.sidebarRecent)\n                        refs.sidebarRecent.classList.add('finder-sidebar-active');\n                    break;\n            }\n        }\n\n        /**\n         * Render breadcrumbs\n         */\n        renderBreadcrumbs() {\n            if (!this.domRefs.breadcrumbs) return;\n\n            const parts = [];\n\n            // View label\n            let viewLabel = '';\n            switch (this.currentView) {\n                case 'computer':\n                    viewLabel = 'Computer';\n                    break;\n                case 'github':\n                    viewLabel = 'GitHub Projekte';\n                    break;\n                case 'favorites':\n                    viewLabel = 'Favoriten';\n                    break;\n                case 'recent':\n                    viewLabel = 'Zuletzt geöffnet';\n                    break;\n            }\n\n            parts.push(\n                `<button class=\"finder-breadcrumb-item\" data-action=\"finder:goRoot\">${viewLabel}</button>`\n            );\n\n            // Path parts\n            this.currentPath.forEach((part, index) => {\n                // Skip root folder name if we're in computer view and it's the first part\n                if (index === 0 && this.currentView === 'computer' && part === ROOT_FOLDER_NAME) {\n                    return;\n                }\n\n                const pathUpToHere = this.currentPath.slice(0, index + 1);\n                parts.push('<span class=\"finder-breadcrumb-separator\">›</span>');\n                parts.push(\n                    `<button class=\"finder-breadcrumb-item\" data-action=\"finder:navigateToPath\" data-path=\"${pathUpToHere.join('/')}\">${part}</button>`\n                );\n            });\n\n            this.domRefs.breadcrumbs.innerHTML = parts.join('');\n        }\n\n        /**\n         * Render content area\n         */\n        renderContent() {\n            if (!this.domRefs.contentArea) return;\n\n            // Special handling for GitHub view (async loading)\n            if (this.currentView === 'github') {\n                this.renderGithubContent();\n                return;\n            }\n\n            const items = this.getCurrentItems();\n\n            if (items.length === 0) {\n                this.domRefs.contentArea.innerHTML = `\n                    <div class=\"finder-empty-state\">\n                        <div class=\"text-6xl mb-4\">📂</div>\n                        <div class=\"text-gray-500 dark:text-gray-400\">Dieser Ordner ist leer</div>\n                    </div>\n                `;\n                return;\n            }\n\n            // Sort items\n            const sortedItems = this.sortItems(items);\n\n            // Render based on view mode\n            switch (this.viewMode) {\n                case 'list':\n                    this.renderListView(sortedItems);\n                    break;\n                case 'grid':\n                    this.renderGridView(sortedItems);\n                    break;\n                case 'columns':\n                    this.renderListView(sortedItems); // Fallback to list for now\n                    break;\n            }\n        }\n\n        /**\n         * Get current items based on view and path\n         */\n        getCurrentItems() {\n            switch (this.currentView) {\n                case 'computer':\n                    return this.getComputerItems();\n                case 'github':\n                    return this.getGithubItems();\n                case 'favorites':\n                    return this.getFavoriteItems();\n                case 'recent':\n                    return this.getRecentItems();\n                default:\n                    return [];\n            }\n        }\n\n        /**\n         * Get computer items\n         */\n        getComputerItems() {\n            let current = this.virtualFileSystem;\n\n            for (const pathPart of this.currentPath) {\n                if (current[pathPart] && current[pathPart].children) {\n                    current = current[pathPart].children;\n                } else {\n                    return [];\n                }\n            }\n\n            return Object.entries(current).map(([name, item]) => ({\n                name,\n                type: item.type,\n                icon: item.icon || (item.type === 'folder' ? '📁' : '📄'),\n                size: item.size || 0,\n                modified: item.modified || new Date().toISOString(),\n            }));\n        }\n\n        /**\n         * Get GitHub items (placeholder - simplified from finder.js)\n         */\n        getGithubItems() {\n            // Fallback (should be handled by renderGithubContent)\n            return [];\n        }\n\n        /**\n         * Get favorite items\n         */\n        getFavoriteItems() {\n            return Array.from(this.favorites).map(path => ({\n                name: path.split('/').pop(),\n                type: 'favorite',\n                icon: '⭐',\n                path,\n            }));\n        }\n\n        /**\n         * Get recent items\n         */\n        getRecentItems() {\n            return this.recentFiles.map(file => ({\n                name: file.name,\n                type: 'recent',\n                icon: file.icon || '📄',\n                path: file.path,\n                modified: file.modified,\n            }));\n        }\n\n        /**\n         * Sort items\n         */\n        sortItems(items) {\n            const sorted = [...items];\n\n            sorted.sort((a, b) => {\n                // Folders first\n                if (a.type === 'folder' && b.type !== 'folder') return -1;\n                if (a.type !== 'folder' && b.type === 'folder') return 1;\n\n                // Then by sortBy\n                let comparison = 0;\n                switch (this.sortBy) {\n                    case 'name':\n                        comparison = a.name.localeCompare(b.name);\n                        break;\n                    case 'size':\n                        comparison = (a.size || 0) - (b.size || 0);\n                        break;\n                    case 'date':\n                        comparison = new Date(b.modified || 0) - new Date(a.modified || 0);\n                        break;\n                    case 'type':\n                        comparison = (a.type || '').localeCompare(b.type || '');\n                        break;\n                }\n\n                return this.sortOrder === 'asc' ? comparison : -comparison;\n            });\n\n            return sorted;\n        }\n\n        /**\n         * Render list view\n         */\n        renderListView(items) {\n            const html = `\n                <div id=\"finder-list-container\">\n                <table class=\"finder-list-table\">\n                    <thead>\n                        <tr>\n                            <th data-action=\"finder:setSortBy\" data-sort-by=\"name\">Name</th>\n                            <th data-action=\"finder:setSortBy\" data-sort-by=\"size\">Größe</th>\n                            <th data-action=\"finder:setSortBy\" data-sort-by=\"date\">Geändert</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${items\n        .map(\n            item => `\n                            <tr class=\"finder-list-item\" data-action-dblclick=\"finder:openItem\" data-item-name=\"${item.name}\" data-item-type=\"${item.type}\">\n                                <td>\n                                    <span class=\"finder-item-icon\">${item.icon}</span>\n                                    <span class=\"finder-item-name\">${item.name}</span>\n                                </td>\n                                <td>${this.formatSize(item.size)}</td>\n                                <td>${this.formatDate(item.modified)}</td>\n                            </tr>\n                        `\n        )\n        .join('')}\n                    </tbody>\n                </table>\n                </div>\n            `;\n\n            this.domRefs.contentArea.innerHTML = html;\n        }\n\n        /**\n         * Render grid view\n         */\n        renderGridView(items) {\n            const html = `\n                <div id=\"finder-list-container\">\n                <div class=\"finder-grid-container\">\n                    ${items\n        .map(\n            item => `\n                        <div class=\"finder-grid-item\" data-action-dblclick=\"finder:openItem\" data-item-name=\"${item.name}\" data-item-type=\"${item.type}\">\n                            <div class=\"finder-grid-icon\">${item.icon}</div>\n                            <div class=\"finder-grid-name\">${item.name}</div>\n                        </div>\n                    `\n        )\n        .join('')}\n                </div>\n                </div>\n            `;\n\n            this.domRefs.contentArea.innerHTML = html;\n        }\n\n        /**\n         * Open item\n         */\n        openItem(name, type) {\n            if (type === 'folder') {\n                this.navigateToFolder(name);\n            } else if (type === 'file') {\n                // Add to recent files\n                this.addToRecent(name);\n                // Emit event for file opening (can be handled by parent)\n                this.emit('fileOpened', { name, path: [...this.currentPath, name].join('/') });\n\n                // If in GitHub view and image file, open image viewer\n                if (this.currentView === 'github') {\n                    const item = this.lastGithubItemsMap.get(name);\n                    const isImage = /\\.(png|jpe?g|gif|bmp|webp|svg)$/i.test(name);\n                    if (item && isImage && item.download_url) {\n                        this.openImageViewer({ src: item.download_url, name });\n                    }\n                }\n            }\n        }\n\n        /**\n         * Render GitHub view with async fetching and caching\n         */\n        async renderGithubContent() {\n            const el = this.domRefs.contentArea;\n            if (!el) return;\n\n            // Root (list repos)\n            if (this.currentPath.length === 0) {\n                // Loading placeholder\n                el.innerHTML = '<div class=\"finder-empty-state\">Lade Repositories…</div>';\n                const repos = await this.fetchGithubRepos();\n                this.lastGithubItemsMap.clear();\n                const items = (repos || []).map(repo => ({\n                    name: repo.name,\n                    type: 'folder',\n                    icon: '📦',\n                }));\n                items.forEach(it => this.lastGithubItemsMap.set(it.name, it));\n                if (this.githubError && items.length === 0) {\n                    el.innerHTML =\n                        '<div class=\"finder-empty-state text-center\"><div class=\"text-2xl mb-2\">⚠️</div><div>Repositories could not be loaded (Repos konnten nicht geladen werden). Possible Rate Limit.</div></div>';\n                } else if (items.length === 0) {\n                    el.innerHTML =\n                        '<div class=\"finder-empty-state text-center\">Keine öffentlichen Repositories gefunden</div>';\n                } else {\n                    this.renderListView(items);\n                }\n                return;\n            }\n\n            // Repo and subpaths\n            const repo = this.currentPath[0];\n            const subPathParts = this.currentPath.slice(1);\n            const subPath = subPathParts.join('/');\n\n            el.innerHTML = '<div class=\"finder-empty-state\">Lade Inhalte…</div>';\n            const contents = await this.fetchGithubContents(repo, subPath);\n            this.lastGithubItemsMap.clear();\n            const items = (contents || []).map(entry => {\n                const isDir = entry.type === 'dir';\n                return {\n                    name: entry.name,\n                    type: isDir ? 'folder' : 'file',\n                    icon: isDir ? '📁' : '📄',\n                    size: entry.size || 0,\n                    download_url: entry.download_url || null,\n                };\n            });\n            items.forEach(it => this.lastGithubItemsMap.set(it.name, it));\n            if (this.githubError && items.length === 0) {\n                el.innerHTML =\n                    '<div class=\"finder-empty-state text-center\"><div class=\"text-2xl mb-2\">⚠️</div><div>Repositories could not be loaded (Repos konnten nicht geladen werden). Possible Rate Limit.</div></div>';\n            } else if (items.length === 0) {\n                el.innerHTML =\n                    '<div class=\"finder-empty-state text-center\">Dieser Ordner ist leer</div>';\n            } else {\n                this.renderListView(items);\n            }\n        }\n\n        /**\n         * Fetch GitHub repos for configured user\n         */\n        async fetchGithubRepos() {\n            const GITHUB_USERNAME = 'Marormur';\n            try {\n                // Simple in-memory cache per instance\n                if (Array.isArray(this.githubRepos) && this.githubRepos.length) {\n                    return this.githubRepos;\n                }\n                const res = await fetch(`https://api.github.com/users/${GITHUB_USERNAME}/repos`, {\n                    headers: { Accept: 'application/vnd.github.v3+json' },\n                });\n                if (!res.ok) throw new Error('GitHub repos fetch failed');\n                const data = await res.json();\n                this.githubRepos = data || [];\n                this.githubError = false;\n                this.githubErrorMessage = '';\n                return this.githubRepos;\n            } catch (e) {\n                console.warn('GitHub repos error:', e);\n                this.githubError = true;\n                this.githubErrorMessage = 'Repositories could not be loaded';\n                return [];\n            }\n        }\n\n        /**\n         * Fetch contents (files/folders) for a given repo and subPath\n         */\n        async fetchGithubContents(repo, subPath = '') {\n            try {\n                const key = `${repo}:${subPath}`;\n                if (this.githubContentCache.has(key)) {\n                    return this.githubContentCache.get(key);\n                }\n                const base = `https://api.github.com/repos/Marormur/${repo}/contents`;\n                const url = subPath ? `${base}/${this._encodeGithubPath(subPath)}` : base;\n                const res = await fetch(url, {\n                    headers: { Accept: 'application/vnd.github.v3+json' },\n                });\n                if (!res.ok) throw new Error('GitHub contents fetch failed');\n                const data = await res.json();\n                this.githubContentCache.set(key, data || []);\n                this.githubError = false;\n                this.githubErrorMessage = '';\n                return data;\n            } catch (e) {\n                console.warn('GitHub contents error:', e);\n                this.githubError = true;\n                this.githubErrorMessage = 'Repositories could not be loaded';\n                return [];\n            }\n        }\n\n        /**\n         * Encode a GitHub path by encoding segments but keeping '/'\n         */\n        _encodeGithubPath(subPath) {\n            if (!subPath) return '';\n            return subPath\n                .split('/')\n                .filter(Boolean)\n                .map(seg => encodeURIComponent(seg))\n                .join('/');\n        }\n\n        /**\n         * Open image viewer modal with given src\n         */\n        openImageViewer({ src, name }) {\n            try {\n                const img = document.getElementById('image-viewer');\n                const info = document.getElementById('image-info');\n                const placeholder = document.getElementById('image-placeholder');\n                if (info) {\n                    info.textContent = name || '';\n                    info.classList.remove('hidden');\n                }\n                if (placeholder) placeholder.classList.add('hidden');\n                if (img) {\n                    img.src = src;\n                    img.classList.remove('hidden');\n                }\n                if (window.API?.window?.open) {\n                    window.API.window.open('image-modal');\n                } else {\n                    const modal = document.getElementById('image-modal');\n                    if (modal) modal.classList.remove('hidden');\n                }\n            } catch (e) {\n                console.warn('Failed to open image viewer:', e);\n            }\n        }\n\n        /**\n         * Add to recent files\n         */\n        addToRecent(name) {\n            const fullPath = [...this.currentPath, name].join('/');\n            this.recentFiles.unshift({\n                name,\n                path: fullPath,\n                icon: '📄',\n                modified: new Date().toISOString(),\n            });\n\n            // Limit to 20 items\n            this.recentFiles = this.recentFiles.slice(0, 20);\n            this.updateState({ recentFiles: this.recentFiles });\n        }\n\n        /**\n         * Set sort by\n         */\n        setSortBy(field) {\n            if (this.sortBy === field) {\n                this.sortOrder = this.sortOrder === 'asc' ? 'desc' : 'asc';\n            } else {\n                this.sortBy = field;\n                this.sortOrder = 'asc';\n            }\n            this.renderContent();\n            this.updateState({ sortBy: this.sortBy, sortOrder: this.sortOrder });\n        }\n\n        /**\n         * Set view mode\n         */\n        setViewMode(mode) {\n            this.viewMode = mode;\n            this.renderContent();\n            this.updateState({ viewMode: this.viewMode });\n        }\n\n        /**\n         * Format size\n         */\n        formatSize(bytes) {\n            if (!bytes || bytes === 0) return '-';\n            if (bytes < 1024) return bytes + ' B';\n            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\n            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\n        }\n\n        /**\n         * Format date\n         */\n        formatDate(dateStr) {\n            if (!dateStr) return '-';\n            const date = new Date(dateStr);\n            return date.toLocaleDateString('de-DE', {\n                day: '2-digit',\n                month: '2-digit',\n                year: 'numeric',\n            });\n        }\n\n        /**\n         * Serialize finder state\n         */\n        serialize() {\n            return {\n                ...super.serialize(),\n                currentPath: this.currentPath,\n                currentView: this.currentView,\n                viewMode: this.viewMode,\n                sortBy: this.sortBy,\n                sortOrder: this.sortOrder,\n                favorites: Array.from(this.favorites),\n                recentFiles: this.recentFiles,\n            };\n        }\n\n        /**\n         * Restore finder from saved state\n         */\n        deserialize(data) {\n            super.deserialize(data);\n\n            if (data.currentPath) {\n                this.currentPath = data.currentPath;\n            }\n\n            if (data.currentView) {\n                this.currentView = data.currentView;\n            }\n\n            if (data.viewMode) {\n                this.viewMode = data.viewMode;\n            }\n\n            if (data.sortBy) {\n                this.sortBy = data.sortBy;\n            }\n\n            if (data.sortOrder) {\n                this.sortOrder = data.sortOrder;\n            }\n\n            if (data.favorites) {\n                this.favorites = new Set(data.favorites);\n            }\n\n            if (data.recentFiles) {\n                this.recentFiles = data.recentFiles;\n            }\n\n            // Re-render\n            this.navigateTo(this.currentPath, this.currentView);\n        }\n\n        /**\n         * Focus finder\n         */\n        focus() {\n            super.focus();\n            if (this.domRefs.searchInput) {\n                // Don't auto-focus search input, just bring to front\n            }\n        }\n    }\n\n    // Export\n    window.FinderInstance = FinderInstance;\n\n    // Create Finder Instance Manager\n    if (window.InstanceManager) {\n        window.FinderInstanceManager = new window.InstanceManager({\n            type: 'finder',\n            instanceClass: FinderInstance,\n            maxInstances: 0, // Unlimited\n            createContainer: function (instanceId) {\n                // Create container and append to finder modal container\n                const finderModalContainer = document.getElementById('finder-container');\n                if (!finderModalContainer) {\n                    console.error('Finder container not found');\n                    return null;\n                }\n\n                const container = document.createElement('div');\n                container.id = `${instanceId}-container`;\n                // Make this container a flex column so the rendered content's flex-1 can expand\n                container.className = 'finder-instance-container h-full flex flex-col min-h-0';\n\n                // Initially hidden (will be shown by integration layer)\n                container.classList.add('hidden');\n\n                finderModalContainer.appendChild(container);\n                return container;\n            },\n        });\n    }\n})();\n"]}