{"version":3,"file":"logger.js","sourceRoot":"","sources":["../src/ts/logger.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * src/ts/logger.ts\r\n * Typed port of the legacy `js/logger.js`.\r\n */\r\n\r\nexport type LogLevelName = 'ERROR' | 'WARN' | 'INFO' | 'DEBUG' | 'TRACE';\r\n\r\nconst LOG_LEVELS: Record<LogLevelName, number> = {\r\n    ERROR: 0,\r\n    WARN: 1,\r\n    INFO: 2,\r\n    DEBUG: 3,\r\n    TRACE: 4,\r\n};\r\n\r\nconst LOG_COLORS: Record<LogLevelName, string> = {\r\n    ERROR: '#ff0000',\r\n    WARN: '#ff9800',\r\n    INFO: '#2196f3',\r\n    DEBUG: '#9c27b0',\r\n    TRACE: '#607d8b',\r\n};\r\n\r\nexport class Logger {\r\n    level: number;\r\n    enabledCategories: Set<string>;\r\n    format: 'compact' | 'detailed';\r\n\r\n    constructor() {\r\n        this.level = this.isDevelopment() ? LOG_LEVELS.TRACE : LOG_LEVELS.WARN;\r\n        this.enabledCategories = new Set(['*']);\r\n        this.format = 'compact';\r\n    }\r\n\r\n    isDevelopment(): boolean {\r\n        try {\r\n            return (\r\n                location.hostname === 'localhost' ||\r\n                location.hostname === '127.0.0.1' ||\r\n                location.port !== ''\r\n            );\r\n        } catch {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    setLevel(level: LogLevelName | number) {\r\n        if (typeof level === 'string') {\r\n            this.level = LOG_LEVELS[level.toUpperCase() as LogLevelName] ?? LOG_LEVELS.INFO;\r\n        } else {\r\n            this.level = level;\r\n        }\r\n    }\r\n\r\n    enableCategory(category: string) {\r\n        if (category === '*') {\r\n            this.enabledCategories.clear();\r\n            this.enabledCategories.add('*');\r\n        } else {\r\n            this.enabledCategories.add(category);\r\n        }\r\n    }\r\n\r\n    disableCategory(category: string) {\r\n        this.enabledCategories.delete(category);\r\n    }\r\n\r\n    isCategoryEnabled(category: string) {\r\n        return this.enabledCategories.has('*') || this.enabledCategories.has(category);\r\n    }\r\n\r\n    private _log(level: LogLevelName, category: string, message?: unknown, ...args: unknown[]) {\r\n        if (LOG_LEVELS[level] > this.level) return;\r\n        if (!this.isCategoryEnabled(category)) return;\r\n\r\n        const color = LOG_COLORS[level];\r\n        const timestamp = new Date().toLocaleTimeString();\r\n\r\n        if (this.format === 'detailed') {\r\n            console.log(\r\n                `%c[${timestamp}] [${level}] [${category}]`,\r\n                `color: ${color}; font-weight: bold`,\r\n                message,\r\n                ...args\r\n            );\r\n        } else {\r\n            console.log(`%c[${category}]`, `color: ${color}`, message, ...args);\r\n        }\r\n    }\r\n\r\n    error(category: string, message?: unknown, ...args: unknown[]) {\r\n        this._log('ERROR', category, message, ...args);\r\n    }\r\n\r\n    warn(category: string, message?: unknown, ...args: unknown[]) {\r\n        this._log('WARN', category, message, ...args);\r\n    }\r\n\r\n    info(category: string, message?: unknown, ...args: unknown[]) {\r\n        this._log('INFO', category, message, ...args);\r\n    }\r\n\r\n    debug(category: string, message?: unknown, ...args: unknown[]) {\r\n        this._log('DEBUG', category, message, ...args);\r\n    }\r\n\r\n    trace(category: string, message?: unknown, ...args: unknown[]) {\r\n        this._log('TRACE', category, message, ...args);\r\n    }\r\n\r\n    group(category: string, title?: string) {\r\n        if (!this.isCategoryEnabled(category)) return;\r\n        console.group(title ?? category);\r\n    }\r\n\r\n    groupEnd() {\r\n        console.groupEnd();\r\n    }\r\n\r\n    time(label: string) {\r\n        console.time(label);\r\n    }\r\n\r\n    timeEnd(label: string) {\r\n        console.timeEnd(label);\r\n    }\r\n}\r\n\r\nconst logger = new Logger();\r\n\r\nexport default logger;\r\n\r\ndeclare global {\r\n    interface Window {\r\n        Logger?: Logger;\r\n    }\r\n}\r\n\r\nif (typeof window !== 'undefined') {\r\n    window.Logger = logger;\r\n}\r\n\r\n// For CommonJS compatibility\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ndeclare const module: any;\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = logger;\r\n}\r\n"]}