{"version":3,"file":"window-chrome.js","sourceRoot":"","sources":["../src/ts/window-chrome.ts"],"names":[],"mappings":"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","sourcesContent":["console.log('WindowChrome loaded');\n\n(function () {\n  'use strict';\n\n  type ControlType = 'close' | 'minimize' | 'maximize';\n\n  type TitlebarConfig = {\n    title?: string;\n    icon?: string;\n    showClose?: boolean;\n    showMinimize?: boolean;\n    showMaximize?: boolean;\n    onClose?: () => void;\n    onMinimize?: () => void;\n    onMaximize?: () => void;\n  };\n\n  type ToolbarSeparator = { type: 'separator' };\n  type ToolbarButtonCfg = {\n    label?: string;\n    icon?: string;\n    title?: string;\n    action?: string;\n    onClick?: (e: MouseEvent) => void;\n  };\n  type ToolbarItem = ToolbarSeparator | ToolbarButtonCfg;\n\n  type StatusBarConfig = {\n    leftContent?: string;\n    rightContent?: string;\n  };\n\n  type WindowFrameConfig = TitlebarConfig & {\n    toolbar?: ToolbarItem[];\n    showStatusBar?: boolean;\n    statusBarLeft?: string;\n    statusBarRight?: string;\n  };\n\n  type WindowFrameParts = {\n    frame: HTMLElement;\n    titlebar: HTMLElement;\n    content: HTMLElement;\n    statusbar: HTMLElement | null;\n  };\n\n  function createControlButton(type: ControlType, symbol: string, callback?: () => void): HTMLButtonElement {\n    const btn = document.createElement('button');\n    btn.type = 'button';\n    btn.className = `window-control-btn window-${type}-btn`;\n    btn.innerHTML = symbol;\n    btn.style.cssText =\n      'width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; border-radius: 4px; transition: background-color 0.2s;';\n\n    btn.addEventListener('mouseenter', () => {\n      if (type === 'close') {\n        btn.style.backgroundColor = '#ef4444';\n        btn.style.color = '#ffffff';\n      } else {\n        btn.style.backgroundColor = 'rgba(0, 0, 0, 0.1)';\n      }\n    });\n\n    btn.addEventListener('mouseleave', () => {\n      btn.style.backgroundColor = 'transparent';\n      btn.style.color = '';\n    });\n\n    if (callback) {\n      btn.addEventListener('click', () => callback());\n    }\n\n    return btn;\n  }\n\n  function createToolbarButton(config: ToolbarButtonCfg): HTMLButtonElement {\n    const btn = document.createElement('button');\n    btn.type = 'button';\n    btn.className = 'toolbar-btn px-2 py-1 text-sm rounded hover:bg-gray-200 dark:hover:bg-gray-800 transition';\n\n    if (config.icon) {\n      btn.innerHTML = config.icon;\n    } else if (config.label) {\n      btn.textContent = config.label;\n    }\n\n    if (config.title) btn.title = config.title;\n    if (config.action) btn.dataset.action = config.action;\n    if (config.onClick) btn.addEventListener('click', config.onClick);\n\n    return btn;\n  }\n\n  const WindowChrome = {\n    createTitlebar(config: TitlebarConfig): HTMLElement {\n      const titlebar = document.createElement('div');\n      titlebar.className =\n        'window-titlebar flex items-center justify-between px-3 py-2 bg-gray-200 dark:bg-gray-800 border-b border-gray-300 dark:border-gray-700';\n      titlebar.style.cssText = 'height: 32px; cursor: move; user-select: none;';\n\n      const leftSide = document.createElement('div');\n      leftSide.className = 'flex items-center gap-2';\n\n      if (config.icon) {\n        const iconEl = document.createElement('span');\n        iconEl.className = 'window-icon';\n\n        if (config.icon.startsWith('http') || config.icon.startsWith('./') || config.icon.startsWith('/')) {\n          const img = document.createElement('img');\n          img.src = config.icon;\n          img.alt = '';\n          img.style.cssText = 'width: 16px; height: 16px; object-fit: contain;';\n          iconEl.appendChild(img);\n        } else {\n          iconEl.textContent = config.icon;\n          iconEl.style.fontSize = '16px';\n        }\n\n        leftSide.appendChild(iconEl);\n      }\n\n      const titleEl = document.createElement('span');\n      titleEl.className = 'window-title font-medium text-sm text-gray-800 dark:text-gray-200';\n      titleEl.textContent = config.title || 'Untitled';\n      (titleEl as HTMLElement).dataset.titleTarget = 'true';\n      leftSide.appendChild(titleEl);\n\n      titlebar.appendChild(leftSide);\n\n      const rightSide = document.createElement('div');\n      rightSide.className = 'flex items-center gap-1';\n\n      if (config.showMinimize) {\n        rightSide.appendChild(createControlButton('minimize', '−', config.onMinimize));\n      }\n      if (config.showMaximize) {\n        rightSide.appendChild(createControlButton('maximize', '□', config.onMaximize));\n      }\n      if (config.showClose !== false) {\n        rightSide.appendChild(createControlButton('close', '×', config.onClose));\n      }\n\n      titlebar.appendChild(rightSide);\n\n      return titlebar;\n    },\n\n    createToolbar(buttons: ToolbarItem[]): HTMLElement {\n      const toolbar = document.createElement('div');\n      toolbar.className =\n        'window-toolbar flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-900 border-b border-gray-300 dark:border-gray-700';\n\n      buttons.forEach((btn) => {\n        if ((btn as ToolbarSeparator).type === 'separator') {\n          const separator = document.createElement('div');\n          separator.className = 'toolbar-separator';\n          separator.style.cssText = 'width: 1px; height: 20px; background: currentColor; opacity: 0.2;';\n          toolbar.appendChild(separator);\n        } else {\n          toolbar.appendChild(createToolbarButton(btn as ToolbarButtonCfg));\n        }\n      });\n\n      return toolbar;\n    },\n\n    createStatusBar(config: StatusBarConfig): HTMLElement {\n      const statusBar = document.createElement('div');\n      statusBar.className =\n        'window-statusbar flex items-center justify-between px-3 py-1 bg-gray-100 dark:bg-gray-900 border-t border-gray-300 dark:border-gray-700 text-xs text-gray-600 dark:text-gray-400';\n      statusBar.style.cssText = 'height: 24px;';\n\n      const leftEl = document.createElement('span');\n      leftEl.className = 'statusbar-left';\n      leftEl.textContent = config.leftContent || '';\n      statusBar.appendChild(leftEl);\n\n      const rightEl = document.createElement('span');\n      rightEl.className = 'statusbar-right';\n      rightEl.textContent = config.rightContent || '';\n      statusBar.appendChild(rightEl);\n\n      return statusBar;\n    },\n\n    updateTitle(titlebar: HTMLElement, newTitle: string): void {\n      const titleEl = titlebar.querySelector('[data-title-target=\"true\"]');\n      if (titleEl) (titleEl as HTMLElement).textContent = newTitle;\n    },\n\n    updateStatusBar(statusBar: HTMLElement, side: 'left' | 'right', content: string): void {\n      const target = statusBar.querySelector(`.statusbar-${side}`);\n      if (target) (target as HTMLElement).textContent = content;\n    },\n\n    createWindowFrame(config: WindowFrameConfig): WindowFrameParts {\n      const frame = document.createElement('div');\n      frame.className = 'window-frame flex flex-col h-full bg-white dark:bg-gray-900 rounded-lg shadow-lg overflow-hidden';\n\n      const titlebar = this.createTitlebar({\n        title: config.title || 'Untitled',\n        icon: config.icon,\n        showClose: config.showClose,\n        showMinimize: config.showMinimize,\n        showMaximize: config.showMaximize,\n        onClose: config.onClose,\n        onMinimize: config.onMinimize,\n        onMaximize: config.onMaximize,\n      });\n      frame.appendChild(titlebar);\n\n      if (config.toolbar) {\n        const toolbar = this.createToolbar(config.toolbar);\n        frame.appendChild(toolbar);\n      }\n\n      const content = document.createElement('div');\n      content.className = 'window-content flex-1 overflow-auto';\n      frame.appendChild(content);\n\n      let statusbar: HTMLElement | null = null;\n      if (config.showStatusBar) {\n        statusbar = this.createStatusBar({\n          leftContent: config.statusBarLeft || '',\n          rightContent: config.statusBarRight || '',\n        });\n        frame.appendChild(statusbar);\n      }\n\n      return { frame, titlebar, content, statusbar };\n    },\n  } as const;\n\n  (window as unknown as { WindowChrome: typeof WindowChrome }).WindowChrome = WindowChrome;\n})();\n"]}