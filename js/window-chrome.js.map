{"version":3,"file":"window-chrome.js","sourceRoot":"","sources":["../src/ts/window-chrome.ts"],"names":[],"mappings":"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","sourcesContent":["console.log('WindowChrome loaded');\r\n\r\n(function () {\r\n  'use strict';\r\n\r\n  type ControlType = 'close' | 'minimize' | 'maximize';\r\n\r\n  type TitlebarConfig = {\r\n    title?: string;\r\n    icon?: string;\r\n    showClose?: boolean;\r\n    showMinimize?: boolean;\r\n    showMaximize?: boolean;\r\n    onClose?: () => void;\r\n    onMinimize?: () => void;\r\n    onMaximize?: () => void;\r\n  };\r\n\r\n  type ToolbarSeparator = { type: 'separator' };\r\n  type ToolbarButtonCfg = {\r\n    label?: string;\r\n    icon?: string;\r\n    title?: string;\r\n    action?: string;\r\n    onClick?: (e: MouseEvent) => void;\r\n  };\r\n  type ToolbarItem = ToolbarSeparator | ToolbarButtonCfg;\r\n\r\n  type StatusBarConfig = {\r\n    leftContent?: string;\r\n    rightContent?: string;\r\n  };\r\n\r\n  type WindowFrameConfig = TitlebarConfig & {\r\n    toolbar?: ToolbarItem[];\r\n    showStatusBar?: boolean;\r\n    statusBarLeft?: string;\r\n    statusBarRight?: string;\r\n  };\r\n\r\n  type WindowFrameParts = {\r\n    frame: HTMLElement;\r\n    titlebar: HTMLElement;\r\n    content: HTMLElement;\r\n    statusbar: HTMLElement | null;\r\n  };\r\n\r\n  function createControlButton(type: ControlType, symbol: string, callback?: () => void): HTMLButtonElement {\r\n    const btn = document.createElement('button');\r\n    btn.type = 'button';\r\n    btn.className = `window-control-btn window-${type}-btn`;\r\n    btn.innerHTML = symbol;\r\n    btn.style.cssText =\r\n      'width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; border-radius: 4px; transition: background-color 0.2s;';\r\n\r\n    btn.addEventListener('mouseenter', () => {\r\n      if (type === 'close') {\r\n        btn.style.backgroundColor = '#ef4444';\r\n        btn.style.color = '#ffffff';\r\n      } else {\r\n        btn.style.backgroundColor = 'rgba(0, 0, 0, 0.1)';\r\n      }\r\n    });\r\n\r\n    btn.addEventListener('mouseleave', () => {\r\n      btn.style.backgroundColor = 'transparent';\r\n      btn.style.color = '';\r\n    });\r\n\r\n    if (callback) {\r\n      btn.addEventListener('click', () => callback());\r\n    }\r\n\r\n    return btn;\r\n  }\r\n\r\n  function createToolbarButton(config: ToolbarButtonCfg): HTMLButtonElement {\r\n    const btn = document.createElement('button');\r\n    btn.type = 'button';\r\n    btn.className = 'toolbar-btn px-2 py-1 text-sm rounded hover:bg-gray-200 dark:hover:bg-gray-800 transition';\r\n\r\n    if (config.icon) {\r\n      btn.innerHTML = config.icon;\r\n    } else if (config.label) {\r\n      btn.textContent = config.label;\r\n    }\r\n\r\n    if (config.title) btn.title = config.title;\r\n    if (config.action) btn.dataset.action = config.action;\r\n    if (config.onClick) btn.addEventListener('click', config.onClick);\r\n\r\n    return btn;\r\n  }\r\n\r\n  const WindowChrome = {\r\n    createTitlebar(config: TitlebarConfig): HTMLElement {\r\n      const titlebar = document.createElement('div');\r\n      titlebar.className =\r\n        'window-titlebar flex items-center justify-between px-3 py-2 bg-gray-200 dark:bg-gray-800 border-b border-gray-300 dark:border-gray-700';\r\n      titlebar.style.cssText = 'height: 32px; cursor: move; user-select: none;';\r\n\r\n      const leftSide = document.createElement('div');\r\n      leftSide.className = 'flex items-center gap-2';\r\n\r\n      if (config.icon) {\r\n        const iconEl = document.createElement('span');\r\n        iconEl.className = 'window-icon';\r\n\r\n        if (config.icon.startsWith('http') || config.icon.startsWith('./') || config.icon.startsWith('/')) {\r\n          const img = document.createElement('img');\r\n          img.src = config.icon;\r\n          img.alt = '';\r\n          img.style.cssText = 'width: 16px; height: 16px; object-fit: contain;';\r\n          iconEl.appendChild(img);\r\n        } else {\r\n          iconEl.textContent = config.icon;\r\n          iconEl.style.fontSize = '16px';\r\n        }\r\n\r\n        leftSide.appendChild(iconEl);\r\n      }\r\n\r\n      const titleEl = document.createElement('span');\r\n      titleEl.className = 'window-title font-medium text-sm text-gray-800 dark:text-gray-200';\r\n      titleEl.textContent = config.title || 'Untitled';\r\n      (titleEl as HTMLElement).dataset.titleTarget = 'true';\r\n      leftSide.appendChild(titleEl);\r\n\r\n      titlebar.appendChild(leftSide);\r\n\r\n      const rightSide = document.createElement('div');\r\n      rightSide.className = 'flex items-center gap-1';\r\n\r\n      if (config.showMinimize) {\r\n        rightSide.appendChild(createControlButton('minimize', '−', config.onMinimize));\r\n      }\r\n      if (config.showMaximize) {\r\n        rightSide.appendChild(createControlButton('maximize', '□', config.onMaximize));\r\n      }\r\n      if (config.showClose !== false) {\r\n        rightSide.appendChild(createControlButton('close', '×', config.onClose));\r\n      }\r\n\r\n      titlebar.appendChild(rightSide);\r\n\r\n      return titlebar;\r\n    },\r\n\r\n    createToolbar(buttons: ToolbarItem[]): HTMLElement {\r\n      const toolbar = document.createElement('div');\r\n      toolbar.className =\r\n        'window-toolbar flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-900 border-b border-gray-300 dark:border-gray-700';\r\n\r\n      buttons.forEach((btn) => {\r\n        if ((btn as ToolbarSeparator).type === 'separator') {\r\n          const separator = document.createElement('div');\r\n          separator.className = 'toolbar-separator';\r\n          separator.style.cssText = 'width: 1px; height: 20px; background: currentColor; opacity: 0.2;';\r\n          toolbar.appendChild(separator);\r\n        } else {\r\n          toolbar.appendChild(createToolbarButton(btn as ToolbarButtonCfg));\r\n        }\r\n      });\r\n\r\n      return toolbar;\r\n    },\r\n\r\n    createStatusBar(config: StatusBarConfig): HTMLElement {\r\n      const statusBar = document.createElement('div');\r\n      statusBar.className =\r\n        'window-statusbar flex items-center justify-between px-3 py-1 bg-gray-100 dark:bg-gray-900 border-t border-gray-300 dark:border-gray-700 text-xs text-gray-600 dark:text-gray-400';\r\n      statusBar.style.cssText = 'height: 24px;';\r\n\r\n      const leftEl = document.createElement('span');\r\n      leftEl.className = 'statusbar-left';\r\n      leftEl.textContent = config.leftContent || '';\r\n      statusBar.appendChild(leftEl);\r\n\r\n      const rightEl = document.createElement('span');\r\n      rightEl.className = 'statusbar-right';\r\n      rightEl.textContent = config.rightContent || '';\r\n      statusBar.appendChild(rightEl);\r\n\r\n      return statusBar;\r\n    },\r\n\r\n    updateTitle(titlebar: HTMLElement, newTitle: string): void {\r\n      const titleEl = titlebar.querySelector('[data-title-target=\"true\"]');\r\n      if (titleEl) (titleEl as HTMLElement).textContent = newTitle;\r\n    },\r\n\r\n    updateStatusBar(statusBar: HTMLElement, side: 'left' | 'right', content: string): void {\r\n      const target = statusBar.querySelector(`.statusbar-${side}`);\r\n      if (target) (target as HTMLElement).textContent = content;\r\n    },\r\n\r\n    createWindowFrame(config: WindowFrameConfig): WindowFrameParts {\r\n      const frame = document.createElement('div');\r\n      frame.className = 'window-frame flex flex-col h-full bg-white dark:bg-gray-900 rounded-lg shadow-lg overflow-hidden';\r\n\r\n      const titlebar = this.createTitlebar({\r\n        title: config.title || 'Untitled',\r\n        icon: config.icon,\r\n        showClose: config.showClose,\r\n        showMinimize: config.showMinimize,\r\n        showMaximize: config.showMaximize,\r\n        onClose: config.onClose,\r\n        onMinimize: config.onMinimize,\r\n        onMaximize: config.onMaximize,\r\n      });\r\n      frame.appendChild(titlebar);\r\n\r\n      if (config.toolbar) {\r\n        const toolbar = this.createToolbar(config.toolbar);\r\n        frame.appendChild(toolbar);\r\n      }\r\n\r\n      const content = document.createElement('div');\r\n      content.className = 'window-content flex-1 overflow-auto';\r\n      frame.appendChild(content);\r\n\r\n      let statusbar: HTMLElement | null = null;\r\n      if (config.showStatusBar) {\r\n        statusbar = this.createStatusBar({\r\n          leftContent: config.statusBarLeft || '',\r\n          rightContent: config.statusBarRight || '',\r\n        });\r\n        frame.appendChild(statusbar);\r\n      }\r\n\r\n      return { frame, titlebar, content, statusbar };\r\n    },\r\n  } as const;\r\n\r\n  (window as unknown as { WindowChrome: typeof WindowChrome }).WindowChrome = WindowChrome;\r\n})();\r\n"]}