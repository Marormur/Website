{"version":3,"file":"finder-view.js","sourceRoot":"","sources":["../src/ts/finder-view.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * src/ts/finder-view.ts\r\n * FinderView ‚Äì Ein Tab-Typ innerhalb eines Finder-Fensters.\r\n *\r\n * Verantwortlichkeiten\r\n * --------------------\r\n * - Stellt die UI der Dateiansicht bereit (Sidebar, Toolbar, Breadcrumbs, Content).\r\n * - H√§lt lokalen Zustand pro Tab (Quelle/Path, ViewMode, Sortierung, Favoriten, Recent Files).\r\n * - Aktualisiert den Tab‚ÄëTitel dynamisch, sodass immer der aktuelle Ordner/Context\r\n *   im Tab‚ÄëLabel sichtbar ist.\r\n * - GitHub‚ÄëIntegration: Repositories und deren Inhalte werden mit leichter Caching‚ÄëSchicht\r\n *   geladen (sowohl √ºber interne Map als auch bevorzugt √ºber GitHubAPI‚ÄëCache, falls vorhanden).\r\n *\r\n * Zusammenspiel mit BaseWindow\r\n * ----------------------------\r\n * - Der FinderWindow‚ÄëContainer rendert die Tab-Leiste via WindowTabs und verwaltet mehrere\r\n *   FinderView‚ÄëInstanzen (Multi‚ÄëTab in einem Fenster ‚Äì oder verteilt auf mehrere Fenster).\r\n * - FinderView ruft bei relevanten √Ñnderungen _persistState() auf, was den Window‚ÄëState\r\n *   speichert; die Session enth√§lt so alle offenen Finder‚ÄëTabs inklusive Pfad/Ansicht.\r\n */\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\n\r\nimport { BaseTab, type TabConfig } from './base-tab.js';\r\nimport { VirtualFS } from './virtual-fs.js';\r\nimport PreviewInstanceManager from './preview-instance-manager';\r\n\r\nconst ROOT_FOLDER_NAME = 'Computer';\r\n\r\ntype ViewMode = 'list' | 'grid';\r\n\r\ninterface FileItem {\r\n    name: string;\r\n    type: 'folder' | 'file';\r\n    icon?: string;\r\n    size?: number;\r\n    modified?: string;\r\n    path?: string; // Full path for recent files navigation\r\n}\r\n\r\ninterface RecentFile {\r\n    name: string;\r\n    path: string;\r\n    icon: string;\r\n    modified: string;\r\n}\r\n\r\ntype FinderSource = 'computer' | 'github' | 'recent' | 'starred';\r\n\r\nexport class FinderView extends BaseTab {\r\n    source: FinderSource;\r\n    currentPath: string[];\r\n    viewMode: ViewMode;\r\n    sortBy: 'name' | 'date' | 'size' | 'type';\r\n    sortOrder: 'asc' | 'desc';\r\n    selectedItems: Set<string>;\r\n    _renderedItems: FileItem[];\r\n    _eventHandlersAttached: boolean;\r\n    sidebarWidth: number;\r\n\r\n    // Favorites and Recent Files\r\n    favorites: Set<string>;\r\n    recentFiles: RecentFile[];\r\n    maxRecentFiles: number;\r\n\r\n    // Search\r\n    searchTerm: string;\r\n\r\n    // GitHub Content Cache\r\n    githubContentCache: Map<string, { data: any; timestamp: number }>;\r\n    cacheTTL: number;\r\n\r\n    dom: {\r\n        toolbar: HTMLElement | null;\r\n        breadcrumbs: HTMLElement | null;\r\n        content: HTMLElement | null;\r\n        viewListBtn: HTMLButtonElement | null;\r\n        viewGridBtn: HTMLButtonElement | null;\r\n        sidebar: HTMLElement | null;\r\n        resizer: HTMLElement | null;\r\n    };\r\n\r\n    githubRepos: any[];\r\n    githubError = false;\r\n    githubErrorMessage = '';\r\n    lastGithubItemsMap: Map<string, any>;\r\n\r\n    constructor(config?: Partial<TabConfig> & { source?: FinderSource }) {\r\n        super({\r\n            type: 'finder-view',\r\n            title: config?.title || 'Computer',\r\n            icon: 'üíª',\r\n            ...config,\r\n        });\r\n\r\n        this.source = config?.source || 'computer';\r\n        this.currentPath = [];\r\n        this.viewMode = 'list';\r\n        this.sortBy = 'name';\r\n        this.sortOrder = 'asc';\r\n        this.selectedItems = new Set();\r\n        this._renderedItems = [];\r\n        this._eventHandlersAttached = false;\r\n        this.sidebarWidth = config?.content?.sidebarWidth ?? 192; // default 12rem\r\n\r\n        this.githubRepos = [];\r\n        this.lastGithubItemsMap = new Map();\r\n\r\n        // Initialize Favorites from saved state\r\n        const savedFavorites = config?.content?.favorites || [];\r\n        this.favorites = new Set(savedFavorites);\r\n\r\n        // Load recent files from global storage (shared across all tabs/windows)\r\n        this.recentFiles = FinderView.loadRecentFiles();\r\n        this.maxRecentFiles = FinderView.MAX_RECENT_FILES;\r\n\r\n        // Initialize Search\r\n        this.searchTerm = '';\r\n\r\n        // Initialize GitHub Cache\r\n        this.githubContentCache = new Map();\r\n        this.cacheTTL = 5 * 60 * 1000; // 5 minutes\r\n\r\n        this.dom = {\r\n            toolbar: null,\r\n            breadcrumbs: null,\r\n            content: null,\r\n            viewListBtn: null,\r\n            viewGridBtn: null,\r\n            sidebar: null,\r\n            resizer: null,\r\n        };\r\n    }\r\n\r\n    createDOM(): HTMLElement {\r\n        const container = document.createElement('div');\r\n        container.id = `${this.id}-container`;\r\n        container.className = 'tab-content hidden w-full h-full flex flex-col min-h-0';\r\n\r\n        const isGithub = this.source === 'github';\r\n        container.innerHTML = `\r\n            <div class=\"flex-1 flex gap-0 min-h-0 min-w-0 overflow-hidden\">\r\n                <aside id=\"finder-sidebar\" class=\"shrink-0 bg-gray-50 dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 overflow-y-auto\" style=\"width: ${this.sidebarWidth}px;\">\r\n                    <div class=\"py-2\">\r\n                        <div class=\"px-3 py-1 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide\" data-i18n=\"finder.sidebar.favorites\">FAVORITEN</div>\r\n                        <button class=\"finder-sidebar-item\" id=\"finder-sidebar-home\" data-sidebar-action=\"home\">\r\n                            <span class=\"finder-sidebar-icon\">üè†</span>\r\n                            <span data-i18n=\"finder.sidebar.home\">Home</span>\r\n                        </button>\r\n                        <button class=\"finder-sidebar-item finder-sidebar-active\" id=\"finder-sidebar-computer\" data-sidebar-action=\"computer\">\r\n                            <span class=\"finder-sidebar-icon\">üíª</span>\r\n                            <span data-i18n=\"finder.sidebar.computer\">Computer</span>\r\n                        </button>\r\n                        <button class=\"finder-sidebar-item\" id=\"finder-sidebar-recent\" data-sidebar-action=\"recent\">\r\n                            <span class=\"finder-sidebar-icon\">üïí</span>\r\n                            <span data-i18n=\"finder.sidebar.recent\">Zuletzt verwendet</span>\r\n                        </button>\r\n                        <div class=\"px-3 py-1 mt-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide\" data-i18n=\"finder.sidebar.locations\">ORTE</div>\r\n                        <button class=\"finder-sidebar-item\" id=\"finder-sidebar-github\" data-sidebar-action=\"github\">\r\n                            <span class=\"finder-sidebar-icon\">üìÇ</span>\r\n                            <span data-i18n=\"finder.sidebar.github\">GitHub Projekte</span>\r\n                        </button>\r\n                        <button class=\"finder-sidebar-item\" id=\"finder-sidebar-starred\" data-sidebar-action=\"starred\">\r\n                            <span class=\"finder-sidebar-icon\">‚≠ê</span>\r\n                            <span data-i18n=\"finder.sidebar.starred\">Markiert</span>\r\n                        </button>\r\n                    </div>\r\n                </aside>\r\n                <div class=\"finder-resizer shrink-0 w-1 md:w-1.5 bg-gray-200 dark:bg-gray-700 hover:bg-blue-400 cursor-col-resize\" role=\"separator\" aria-orientation=\"vertical\" title=\"Gr√∂√üe √§ndern\"></div>\r\n                <div class=\"flex-1 flex flex-col min-h-0 min-w-0\">\r\n                    <div class=\"finder-toolbar px-4 py-2 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2\">\r\n                        <!-- Back / Root like old Finder -->\r\n                        <button class=\"finder-toolbar-btn\" data-action=\"navigate-up\" data-i18n-title=\"finder.toolbar.back\" title=\"Zur√ºck\">\r\n                            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M19 12H5M12 19l-7-7 7-7\" /></svg>\r\n                        </button>\r\n                        <button class=\"finder-toolbar-btn\" data-action=\"navigate-root\" data-i18n-title=\"finder.toolbar.forward\" title=\"Nach vorn\">\r\n                            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M5 12h14M12 5l7 7-7 7\" /></svg>\r\n                        </button>\r\n                        <!-- Breadcrumbs centered/left grow -->\r\n                        <div class=\"flex-1 mx-2 min-w-0\">\r\n                            <div class=\"breadcrumbs text-sm text-gray-600 dark:text-gray-400 flex items-center gap-1 overflow-hidden\"></div>\r\n                        </div>\r\n                        <!-- Optional: sort menu next to view controls -->\r\n                        <div class=\"relative hidden md:block\">\r\n                            <button class=\"finder-toolbar-btn\" data-action=\"toggle-sort\" title=\"Sortierung\">‚áÖ</button>\r\n                            <div class=\"finder-sort-menu hidden absolute right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded shadow-lg z-10\" style=\"width: 180px;\">\r\n                                <button class=\"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700\" data-sort=\"name\" data-i18n=\"context.finder.sortByName\">Nach Name</button>\r\n                                <button class=\"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700\" data-sort=\"date\" data-i18n=\"context.finder.sortByDate\">Nach Datum</button>\r\n                                <button class=\"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700\" data-sort=\"size\" data-i18n=\"context.finder.sortBySize\">Nach Gr√∂√üe</button>\r\n                                <div class=\"border-t border-gray-200 dark:border-gray-700 my-1\"></div>\r\n                                <button class=\"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700\" data-order=\"asc\">‚Üë Aufsteigend</button>\r\n                                <button class=\"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700\" data-order=\"desc\">‚Üì Absteigend</button>\r\n                            </div>\r\n                        </div>\r\n                        <button class=\"finder-toolbar-btn\" data-action=\"toggle-favorite\" title=\"Zu Favoriten\" style=\"display: none;\">‚≠ê</button>\r\n                        <div class=\"flex gap-1\">\r\n                            <button class=\"finder-toolbar-btn\" data-action=\"view-list\" data-i18n-title=\"finder.toolbar.listView\" title=\"Listenansicht\">\r\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M3 4h18v2H3V4m0 7h18v2H3v-2m0 7h18v2H3v-2Z\" /></svg>\r\n                            </button>\r\n                            <button class=\"finder-toolbar-btn\" data-action=\"view-grid\" data-i18n-title=\"finder.toolbar.gridView\" title=\"Rasteransicht\">\r\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M3 3h8v8H3V3m10 0h8v8h-8V3M3 13h8v8H3v-8m10 0h8v8h-8v-8Z\" /></svg>\r\n                            </button>\r\n                        </div>\r\n                        <input type=\"text\" class=\"finder-search px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 flex-shrink-0 w-28 sm:w-40 md:w-56 lg:w-72 xl:w-80\" data-i18n-placeholder=\"finder.toolbar.search\" placeholder=\"Suchen\" />\r\n                    </div>\r\n                    <div class=\"finder-content flex-1 overflow-auto bg-white dark:bg-gray-800 min-w-0\" data-finder-content></div>\r\n                </div>\r\n            </div>\r\n        `;\r\n\r\n        this.element = container;\r\n        this.dom.toolbar = container.querySelector('.finder-toolbar');\r\n        this.dom.breadcrumbs = container.querySelector('.breadcrumbs');\r\n        this.dom.content = container.querySelector('.finder-content');\r\n        this.dom.sidebar = container.querySelector('#finder-sidebar');\r\n        this.dom.resizer = container.querySelector('.finder-resizer');\r\n        this.dom.viewListBtn = null;\r\n        this.dom.viewGridBtn = null;\r\n\r\n        // Toolbar/Sidebar/Content Interaktionen anbinden\r\n        this._attachEvents();\r\n        this._attachSidebarEvents();\r\n        this._attachResizeHandlers();\r\n        this._setupContentEventHandlers();\r\n        this._renderAll();\r\n\r\n        // Apply i18n translations\r\n        const w = window as any;\r\n        if (w.appI18n) {\r\n            w.appI18n.applyTranslations(container);\r\n        }\r\n\r\n        return container;\r\n    }\r\n\r\n    private _attachResizeHandlers(): void {\r\n        const sidebar = this.dom.sidebar;\r\n        const resizer = this.dom.resizer;\r\n        const contentArea = this.element?.querySelector(\r\n            '.flex-1.flex.gap-0.min-h-0.overflow-hidden'\r\n        ) as HTMLElement | null;\r\n        if (!sidebar || !resizer) return;\r\n\r\n        const minWidth = 160; // px\r\n        const maxWidth = 480; // px\r\n\r\n        let startX = 0;\r\n        let startWidth = 0;\r\n        let dragging = false;\r\n\r\n        const onMouseMove = (e: MouseEvent) => {\r\n            if (!dragging) return;\r\n            const dx = e.clientX - startX;\r\n            let newWidth = Math.max(minWidth, Math.min(startWidth + dx, maxWidth));\r\n\r\n            // Also ensure there's room for content (min 360px)\r\n            const container = this.element as HTMLElement;\r\n            if (container) {\r\n                const total = container.clientWidth;\r\n                const minContent = 360;\r\n                newWidth = Math.min(newWidth, Math.max(total - minContent, minWidth));\r\n            }\r\n\r\n            sidebar.style.width = `${newWidth}px`;\r\n            this.sidebarWidth = newWidth;\r\n        };\r\n\r\n        const stopDragging = () => {\r\n            if (!dragging) return;\r\n            dragging = false;\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n            document.removeEventListener('mouseup', stopDragging);\r\n            document.body.classList.remove('select-none');\r\n            this._persistState();\r\n        };\r\n\r\n        resizer.addEventListener('mousedown', (e: MouseEvent) => {\r\n            e.preventDefault();\r\n            dragging = true;\r\n            startX = e.clientX;\r\n            startWidth = sidebar.getBoundingClientRect().width;\r\n            document.addEventListener('mousemove', onMouseMove);\r\n            document.addEventListener('mouseup', stopDragging);\r\n            document.body.classList.add('select-none');\r\n        });\r\n    }\r\n\r\n    private _attachEvents(): void {\r\n        if (!this.element) return;\r\n        const upBtn = this.element.querySelector<HTMLButtonElement>('[data-action=\"navigate-up\"]');\r\n        const rootBtn = this.element.querySelector<HTMLButtonElement>(\r\n            '[data-action=\"navigate-root\"]'\r\n        );\r\n        const listBtn = this.element.querySelector<HTMLButtonElement>('[data-action=\"view-list\"]');\r\n        const gridBtn = this.element.querySelector<HTMLButtonElement>('[data-action=\"view-grid\"]');\r\n        const searchInput = this.element.querySelector<HTMLInputElement>('.finder-search');\r\n        const sortToggleBtn = this.element.querySelector<HTMLButtonElement>(\r\n            '[data-action=\"toggle-sort\"]'\r\n        );\r\n        const sortMenu = this.element.querySelector<HTMLElement>('.finder-sort-menu');\r\n        const favoriteBtn = this.element.querySelector<HTMLButtonElement>(\r\n            '[data-action=\"toggle-favorite\"]'\r\n        );\r\n\r\n        upBtn?.addEventListener('click', () => this.navigateUp());\r\n        rootBtn?.addEventListener('click', () => this.goRoot());\r\n        listBtn?.addEventListener('click', () => this.setViewMode('list'));\r\n        gridBtn?.addEventListener('click', () => this.setViewMode('grid'));\r\n\r\n        // Search input\r\n        searchInput?.addEventListener('input', e => {\r\n            this.searchTerm = (e.target as HTMLInputElement).value;\r\n            this.renderContent();\r\n        });\r\n\r\n        // Sort menu toggle\r\n        sortToggleBtn?.addEventListener('click', () => {\r\n            sortMenu?.classList.toggle('hidden');\r\n        });\r\n\r\n        // Sort menu items\r\n        sortMenu?.querySelectorAll<HTMLButtonElement>('[data-sort]').forEach(btn => {\r\n            btn.addEventListener('click', () => {\r\n                const sortBy = btn.dataset.sort as 'name' | 'date' | 'size' | 'type';\r\n                this.setSortBy(sortBy);\r\n                sortMenu.classList.add('hidden');\r\n            });\r\n        });\r\n\r\n        sortMenu?.querySelectorAll<HTMLButtonElement>('[data-order]').forEach(btn => {\r\n            btn.addEventListener('click', () => {\r\n                const order = btn.dataset.order as 'asc' | 'desc';\r\n                this.setSortOrder(order);\r\n                sortMenu.classList.add('hidden');\r\n            });\r\n        });\r\n\r\n        // Close sort menu when clicking outside\r\n        document.addEventListener('click', e => {\r\n            if (\r\n                !sortToggleBtn?.contains(e.target as Node) &&\r\n                !sortMenu?.contains(e.target as Node)\r\n            ) {\r\n                sortMenu?.classList.add('hidden');\r\n            }\r\n        });\r\n\r\n        // Favorite toggle\r\n        favoriteBtn?.addEventListener('click', () => {\r\n            if (this.currentPath.length > 0) {\r\n                this.toggleFavorite(this.currentPath.join('/'));\r\n            }\r\n        });\r\n    }\r\n\r\n    private _attachSidebarEvents(): void {\r\n        if (!this.element) return;\r\n\r\n        // Sidebar navigation\r\n        const sidebarButtons =\r\n            this.element.querySelectorAll<HTMLButtonElement>('[data-sidebar-action]');\r\n        sidebarButtons.forEach(btn => {\r\n            btn.addEventListener('click', () => {\r\n                const action = btn.dataset.sidebarAction;\r\n\r\n                // Handle action\r\n                if (action === 'home') {\r\n                    this.source = 'computer';\r\n                    this.currentPath = ['home', 'marvin'];\r\n                    this._persistState();\r\n                    this._renderAll();\r\n                } else if (action === 'computer') {\r\n                    this.source = 'computer';\r\n                    this.goRoot();\r\n                } else if (action === 'github') {\r\n                    this.source = 'github';\r\n                    this.goRoot();\r\n                } else if (action === 'recent') {\r\n                    this.source = 'recent';\r\n                    this.goRoot();\r\n                } else if (action === 'starred') {\r\n                    this.source = 'starred';\r\n                    this.goRoot();\r\n                }\r\n\r\n                // Stelle sicher, dass das aktive Highlight dem finalen Zustand entspricht\r\n                this._updateSidebarActiveHighlight();\r\n            });\r\n        });\r\n    }\r\n\r\n    private _setupContentEventHandlers(): void {\r\n        if (this._eventHandlersAttached) {\r\n            return;\r\n        }\r\n        // Delegation f√ºr Klick/Double‚ÄëKlick auf List/Grid‚ÄëItems\r\n        const resolveItemEl = (evt: Event): HTMLElement | null => {\r\n            const node = evt.target as Node | null;\r\n            let el: Element | null = null;\r\n            if (node && (node as Element).closest) {\r\n                el = (node as Element).closest('[data-item-index]');\r\n            } else if (node && (node as any).parentElement) {\r\n                el = ((node as any).parentElement as Element).closest('[data-item-index]');\r\n            }\r\n            return el as HTMLElement | null;\r\n        };\r\n\r\n        this.dom.content?.addEventListener('click', e => {\r\n            const itemEl = resolveItemEl(e);\r\n            if (!itemEl) return;\r\n            const idx = parseInt(itemEl.dataset.itemIndex || '-1', 10);\r\n            const item = this._renderedItems[idx];\r\n            if (!item) return;\r\n            this._selectItem(item.name);\r\n        });\r\n        this.dom.content?.addEventListener('dblclick', e => {\r\n            const itemEl = resolveItemEl(e);\r\n            if (!itemEl) return;\r\n            const idx = parseInt(itemEl.dataset.itemIndex || '-1', 10);\r\n            const item = this._renderedItems[idx];\r\n            if (!item) return;\r\n            void this.openItem(item.name, item.type);\r\n        });\r\n        this._eventHandlersAttached = true;\r\n    }\r\n\r\n    private _renderAll(): void {\r\n        this.renderBreadcrumbs();\r\n        this.renderContent();\r\n        this._updateSidebarActiveHighlight();\r\n    }\r\n\r\n    renderBreadcrumbs(): void {\r\n        if (!this.dom.breadcrumbs) return;\r\n        // Ensure the tab title reflects the current folder/view\r\n        this._updateTabLabel();\r\n        const parts: string[] = [];\r\n        const viewLabel = this.source === 'github' ? 'GitHub' : 'Computer';\r\n        parts.push(\r\n            `<button class=\"finder-breadcrumb-item\" data-action=\"goRoot\">${viewLabel}</button>`\r\n        );\r\n        this.currentPath.forEach((part, index) => {\r\n            if (this.source === 'computer' && index === 0 && part === ROOT_FOLDER_NAME) return;\r\n            const pathUpToHere = this.currentPath.slice(0, index + 1).join('/');\r\n            parts.push('<span class=\"finder-breadcrumb-separator\">‚Ä∫</span>');\r\n            parts.push(\r\n                `<button class=\"finder-breadcrumb-item\" data-action=\"goto\" data-path=\"${pathUpToHere}\">${part}</button>`\r\n            );\r\n        });\r\n        this.dom.breadcrumbs.innerHTML = parts.join('');\r\n        this.dom.breadcrumbs\r\n            .querySelectorAll<HTMLButtonElement>('button[data-action=\"goto\"]')\r\n            .forEach(btn => {\r\n                btn.addEventListener('click', () => {\r\n                    const path = btn.dataset.path || '';\r\n                    const parts = path.split('/').filter(Boolean);\r\n                    this.navigateToPath(parts);\r\n                });\r\n            });\r\n        const rootBtn = this.dom.breadcrumbs.querySelector<HTMLButtonElement>(\r\n            'button[data-action=\"goRoot\"]'\r\n        );\r\n        if (rootBtn) rootBtn.addEventListener('click', () => this.goRoot());\r\n    }\r\n\r\n    /**\r\n     * Synchronisiert den aktiven Sidebar-Eintrag mit der aktuellen Quelle/Route.\r\n     * Regeln:\r\n     * - source=github ‚Üí GitHub aktiv\r\n     * - source=recent ‚Üí Zuletzt verwendet aktiv\r\n     * - source=starred ‚Üí Markiert aktiv\r\n     * - source=computer ‚Üí Wenn Pfad mit 'home' beginnt ‚Üí Home aktiv, sonst Computer\r\n     */\r\n    private _updateSidebarActiveHighlight(): void {\r\n        if (!this.element) return;\r\n\r\n        const sidebarButtons = this.element.querySelectorAll<HTMLElement>('[data-sidebar-action]');\r\n        sidebarButtons.forEach(b => b.classList.remove('finder-sidebar-active'));\r\n\r\n        let toActivate: string | null = null;\r\n        switch (this.source) {\r\n            case 'github':\r\n                toActivate = '#finder-sidebar-github';\r\n                break;\r\n            case 'recent':\r\n                toActivate = '#finder-sidebar-recent';\r\n                break;\r\n            case 'starred':\r\n                toActivate = '#finder-sidebar-starred';\r\n                break;\r\n            case 'computer':\r\n            default: {\r\n                const atHome = this.currentPath.length > 0 && this.currentPath[0] === 'home';\r\n                toActivate = atHome ? '#finder-sidebar-home' : '#finder-sidebar-computer';\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (toActivate) {\r\n            const el = this.element.querySelector(toActivate);\r\n            el?.classList.add('finder-sidebar-active');\r\n        }\r\n    }\r\n\r\n    renderContent(): void {\r\n        if (!this.dom.content) return;\r\n\r\n        let items: FileItem[] = [];\r\n\r\n        if (this.source === 'github') {\r\n            // GitHub wird asynchron gerendert, da ggf. Netzwerk/Caches betroffen sind\r\n            void this.renderGithubContent();\r\n            return;\r\n        } else if (this.source === 'recent') {\r\n            items = this.getRecentItems();\r\n        } else if (this.source === 'starred') {\r\n            items = this.getFavoriteItems();\r\n        } else {\r\n            items = this.getComputerItems();\r\n        }\r\n\r\n        // Apply search filter\r\n        const filtered = this.filterItems(items, this.searchTerm);\r\n\r\n        // Sort only if not in recent view (recent items are already sorted by date, newest first)\r\n        const sorted = this.source === 'recent' ? filtered : this.sortItems(filtered);\r\n\r\n        switch (this.viewMode) {\r\n            case 'list':\r\n                this.renderListView(sorted);\r\n                break;\r\n            case 'grid':\r\n                this.renderGridView(sorted);\r\n                break;\r\n        }\r\n    }\r\n\r\n    getComputerItems(): FileItem[] {\r\n        // VirtualFS root is '/'; currentPath is relative to /\r\n        const path = this.currentPath.length === 0 ? ['/'] : ['/', ...this.currentPath];\r\n        const items = VirtualFS.list(path);\r\n        return Object.entries(items).map(([name, item]: [string, any]) => ({\r\n            name,\r\n            type: item.type as 'folder' | 'file',\r\n            icon: item.icon || (item.type === 'folder' ? 'üìÅ' : 'üìÑ'),\r\n            size: item.size || 0,\r\n            modified: item.modified || new Date().toISOString(),\r\n        }));\r\n    }\r\n\r\n    sortItems(items: FileItem[]): FileItem[] {\r\n        const sorted = [...items];\r\n        sorted.sort((a, b) => {\r\n            if (a.type === 'folder' && b.type !== 'folder') return -1;\r\n            if (a.type !== 'folder' && b.type === 'folder') return 1;\r\n            let comparison = 0;\r\n            switch (this.sortBy) {\r\n                case 'name':\r\n                    comparison = a.name.localeCompare(b.name);\r\n                    break;\r\n                case 'size':\r\n                    comparison = (a.size || 0) - (b.size || 0);\r\n                    break;\r\n                case 'date': {\r\n                    const aTime = a.modified ? Date.parse(a.modified) : 0;\r\n                    const bTime = b.modified ? Date.parse(b.modified) : 0;\r\n                    comparison = bTime - aTime;\r\n                    break;\r\n                }\r\n                case 'type':\r\n                    comparison = (a.type || '').localeCompare(b.type || '');\r\n                    break;\r\n            }\r\n            return this.sortOrder === 'asc' ? comparison : -comparison;\r\n        });\r\n        return sorted;\r\n    }\r\n\r\n    renderListView(items: FileItem[]): void {\r\n        this._renderedItems = items;\r\n        const rows = items\r\n            .map(\r\n                (item, i) => `\r\n            <tr class=\"finder-list-item ${this.selectedItems.has(item.name) ? 'bg-blue-100 dark:bg-blue-900' : ''}\" data-item-index=\"${i}\" data-item-name=\"${item.name}\" data-item-type=\"${item.type}\"${item.path ? ` data-item-path=\"${item.path}\"` : ''}>\r\n                <td class=\"pr-2\">\r\n                  <div class=\"flex items-center gap-2 min-w-0\">\r\n                    <span class=\"finder-item-icon shrink-0\">${item.icon || ''}</span>\r\n                    <span class=\"truncate block min-w-0\">${item.name}</span>\r\n                  </div>\r\n                </td>\r\n                <td class=\"text-right whitespace-nowrap pl-2 pr-2\">${this.formatSize(item.size)}</td>\r\n                <td class=\"text-right text-gray-500 dark:text-gray-400 whitespace-nowrap pl-2\">${this.formatDate(item.modified)}</td>\r\n            </tr>\r\n        `\r\n            )\r\n            .join('');\r\n        this.dom.content!.innerHTML = `\r\n            <div class=\"p-2\">\r\n                <table class=\"finder-list-table table-fixed w-full\">\r\n                    <colgroup>\r\n                        <col />\r\n                        <col class=\"w-28\" />\r\n                        <col class=\"w-40\" />\r\n                    </colgroup>\r\n                    <thead>\r\n                        <tr class=\"text-left\">\r\n                            <th class=\"font-medium\">Name</th>\r\n                            <th class=\"text-right font-medium\">Gr√∂√üe</th>\r\n                            <th class=\"text-right font-medium\">Ge√§ndert</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>${rows}</tbody>\r\n                </table>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    renderGridView(items: FileItem[]): void {\r\n        this._renderedItems = items;\r\n        const tiles = items\r\n            .map(\r\n                (item, i) => `\r\n            <div class=\"finder-grid-item ${this.selectedItems.has(item.name) ? 'ring-2 ring-blue-500 ring-offset-2 dark:ring-offset-gray-900 bg-blue-100/60 dark:bg-blue-900/40' : ''} min-w-0 p-3 rounded\" data-item-index=\"${i}\" data-item-name=\"${item.name}\" data-item-type=\"${item.type}\"${item.path ? ` data-item-path=\"${item.path}\"` : ''}>\r\n                <div class=\"finder-grid-icon text-2xl mb-2\">${item.icon || ''}</div>\r\n                <div class=\"finder-grid-name truncate text-sm\">${item.name}</div>\r\n            </div>\r\n        `\r\n            )\r\n            .join('');\r\n        this.dom.content!.innerHTML = `\r\n            <div class=\"finder-grid-container grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-3 p-3\">${tiles}</div>\r\n        `;\r\n    }\r\n\r\n    formatSize(size?: number): string {\r\n        if (!size) return '-';\r\n        const units = ['B', 'KB', 'MB', 'GB'];\r\n        let idx = 0;\r\n        let val = size;\r\n        while (val > 1024 && idx < units.length - 1) {\r\n            val /= 1024;\r\n            idx++;\r\n        }\r\n        return `${val.toFixed(1)} ${units[idx]}`;\r\n    }\r\n\r\n    formatDate(d?: string): string {\r\n        if (!d) return '-';\r\n        try {\r\n            const dt = new Date(d);\r\n            return dt.toLocaleString();\r\n        } catch {\r\n            return d;\r\n        }\r\n    }\r\n\r\n    _selectItem(name: string): void {\r\n        const wasSelected = this.selectedItems.has(name);\r\n        this.selectedItems.clear();\r\n\r\n        if (!wasSelected) {\r\n            this.selectedItems.add(name);\r\n        }\r\n\r\n        // Update selection styling without full re-render\r\n        // This prevents DOM destruction during double-click sequences\r\n        if (this.dom.content) {\r\n            const allItems = this.dom.content.querySelectorAll('[data-item-name]');\r\n            allItems.forEach(el => {\r\n                const itemName = (el as HTMLElement).dataset.itemName;\r\n                const isSelected = this.selectedItems.has(itemName || '');\r\n\r\n                if (this.viewMode === 'list') {\r\n                    if (isSelected) {\r\n                        el.classList.add('bg-blue-100', 'dark:bg-blue-900');\r\n                    } else {\r\n                        el.classList.remove('bg-blue-100', 'dark:bg-blue-900');\r\n                    }\r\n                } else {\r\n                    // Grid mode\r\n                    if (isSelected) {\r\n                        el.classList.add(\r\n                            'ring-2',\r\n                            'ring-blue-500',\r\n                            'ring-offset-2',\r\n                            'dark:ring-offset-gray-900',\r\n                            'bg-blue-100/60',\r\n                            'dark:bg-blue-900/40'\r\n                        );\r\n                    } else {\r\n                        el.classList.remove(\r\n                            'ring-2',\r\n                            'ring-blue-500',\r\n                            'ring-offset-2',\r\n                            'dark:ring-offset-gray-900',\r\n                            'bg-blue-100/60',\r\n                            'dark:bg-blue-900/40'\r\n                        );\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    async openItem(name: string, type: 'folder' | 'file'): Promise<void> {\r\n        if (type === 'folder') {\r\n            this.navigateToFolder(name);\r\n        } else {\r\n            // Special handling for recent files: navigate to original location\r\n            if (this.source === 'recent') {\r\n                const item = this._renderedItems.find(i => i.name === name);\r\n                if (item?.path) {\r\n                    this.navigateToRecentFile(item.path);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Track in recent files (only if not already in recent view)\r\n            if (this.source !== 'recent') {\r\n                this.addToRecent(name);\r\n            }\r\n\r\n            // Track selection first\r\n            this._selectItem(name);\r\n\r\n            // Try to open file in an appropriate program (Text editor for text files)\r\n            const ext = (name.split('.').pop() || '').toLowerCase();\r\n            const textExts = new Set([\r\n                'md', 'txt', 'js', 'ts', 'json', 'html', 'htm', 'css', 'py', 'java', 'c', 'cpp', 'h', 'cs', 'rs', 'go', 'rb', 'php', 'yml', 'yaml', 'xml', 'sh', 'bash'\r\n            ]);\r\n            const imageExts = new Set(['jpg', 'jpeg', 'png', 'gif', 'webp', 'svg', 'bmp', 'ico', 'tiff']);\r\n            const pdfExts = new Set(['pdf']);\r\n\r\n            // Helper to open text content in TextEditorWindow\r\n            const openInTextEditor = (fileName: string, content: string, meta?: { repo?: string; path?: string }) => {\r\n                try {\r\n                    const W = window as any;\r\n                    let editorWindow: any = null;\r\n                    // Prefer existing text-editor window\r\n                    if (W.WindowRegistry && typeof W.WindowRegistry.getWindowsByType === 'function') {\r\n                        const existing = W.WindowRegistry.getWindowsByType('text-editor');\r\n                        if (existing && existing.length > 0) {\r\n                            editorWindow = existing[0];\r\n                        }\r\n                    }\r\n\r\n                    if (!editorWindow && W.TextEditorWindow && typeof W.TextEditorWindow.create === 'function') {\r\n                        editorWindow = W.TextEditorWindow.create();\r\n                    }\r\n\r\n                    if (editorWindow && typeof editorWindow.createDocument === 'function') {\r\n                        editorWindow.createDocument(fileName, content);\r\n                        editorWindow.bringToFront?.();\r\n                        return true;\r\n                    }\r\n\r\n                    // Fallback: if a global TextEditorSystem exists, load remote file there\r\n                    if (W.TextEditorSystem && typeof W.TextEditorSystem.loadRemoteFile === 'function') {\r\n                        W.TextEditorSystem.loadRemoteFile({ content, fileName, repo: meta?.repo, path: meta?.path });\r\n                        return true;\r\n                    }\r\n                } catch (e) {\r\n                    console.warn('[FinderView] Failed to open in text editor:', e);\r\n                }\r\n                return false;\r\n            };\r\n\r\n            // Handle local VirtualFS files\r\n            if (this.source === 'computer') {\r\n                try {\r\n                    const pathParts = this.currentPath.length > 0 ? [...this.currentPath, name] : [name];\r\n                    const content = (VirtualFS as any).readFile(pathParts);\r\n                    if (content !== null && textExts.has(ext)) {\r\n                        openInTextEditor(name, content);\r\n                        return;\r\n                    }\r\n                } catch (e) {\r\n                    console.warn('[FinderView] VirtualFS read failed:', e);\r\n                }\r\n            }\r\n\r\n            // Handle GitHub-sourced files (fetch raw content if necessary)\r\n            if (this.source === 'github') {\r\n                const API = this.getAPI();\r\n                const username = this.getGithubUsername();\r\n                const repo = this.currentPath[0];\r\n                const subPath = this.currentPath.slice(1).concat(name).join('/');\r\n                const maybe = this.lastGithubItemsMap.get(name);\r\n\r\n                // If the listing item contains a direct download_url (as our test mocks do), prefer it\r\n                if (maybe && maybe.download_url) {\r\n                    try {\r\n                        if (imageExts.has(ext)) {\r\n                            const url = maybe.download_url;\r\n                            try {\r\n                                // Try to fetch the resource and open as blob URL to avoid runtime 404/cors\r\n                                const resp = await fetch(url);\r\n                                if (resp.ok) {\r\n                                    const blob = await resp.blob();\r\n                                    const obj = URL.createObjectURL(blob);\r\n                                    if (PreviewInstanceManager && typeof PreviewInstanceManager.openImages === 'function') {\r\n                                        PreviewInstanceManager.openImages([obj], 0, subPath);\r\n                                    } else {\r\n                                        window.open(url, '_blank');\r\n                                    }\r\n                                    return;\r\n                                } else {\r\n                                    // fallback to opening the remote URL\r\n                                    window.open(url, '_blank');\r\n                                    this._renderAll();\r\n                                    return;\r\n                                }\r\n                            } catch (efetch) {\r\n                                console.warn('[FinderView] fetch of download_url failed, falling back to open:', efetch);\r\n                                window.open(url, '_blank');\r\n                                this._renderAll();\r\n                                return;\r\n                            }\r\n                            this._renderAll();\r\n                            return;\r\n                        }\r\n                        if (pdfExts.has(ext)) {\r\n                            window.open(maybe.download_url, '_blank');\r\n                            this._renderAll();\r\n                            return;\r\n                        }\r\n                    } catch (eurl) {\r\n                        console.warn('[FinderView] failed to open maybe.download_url:', eurl);\r\n                    }\r\n                }\r\n\r\n                try {\r\n                    \r\n                    // If API object already contains content (rare for listings), decode and open\r\n                    if (maybe && maybe.content) {\r\n                        const raw = maybe.encoding === 'base64' ? atob((maybe.content || '').replace(/\\n/g, '')) : maybe.content;\r\n                        if (textExts.has(ext)) {\r\n                            openInTextEditor(name, raw, { repo, path: subPath });\r\n                            return;\r\n                        }\r\n                        // Try to handle images/pdf embedded in the listing object\r\n                        try {\r\n                            if (imageExts.has(ext)) {\r\n                                const b64 = maybe.encoding === 'base64' ? (maybe.content || '').replace(/\\n/g, '') : '';\r\n                                if (b64) {\r\n                                    const bytes = atob(b64);\r\n                                    const arr = new Uint8Array(bytes.length);\r\n                                    for (let i = 0; i < bytes.length; i++) arr[i] = bytes.charCodeAt(i);\r\n                                    const mimeMap: Record<string, string> = { jpg: 'image/jpeg', jpeg: 'image/jpeg', png: 'image/png', gif: 'image/gif', webp: 'image/webp', svg: 'image/svg+xml', bmp: 'image/bmp', ico: 'image/x-icon', tiff: 'image/tiff' };\r\n                                    const mime = mimeMap[ext] || 'application/octet-stream';\r\n                                    const blob = new Blob([arr], { type: mime });\r\n                                    const url = URL.createObjectURL(blob);\r\n                                    if (PreviewInstanceManager && typeof PreviewInstanceManager.openImages === 'function') {\r\n                                        PreviewInstanceManager.openImages([url], 0, subPath);\r\n                                    } else {\r\n                                        window.open(url, '_blank');\r\n                                    }\r\n                                    return;\r\n                                }\r\n                            }\r\n                            if (pdfExts.has(ext)) {\r\n                                const b64 = maybe.encoding === 'base64' ? (maybe.content || '').replace(/\\n/g, '') : '';\r\n                                if (b64) {\r\n                                    const bytes = atob(b64);\r\n                                    const arr = new Uint8Array(bytes.length);\r\n                                    for (let i = 0; i < bytes.length; i++) arr[i] = bytes.charCodeAt(i);\r\n                                    const blob = new Blob([arr], { type: 'application/pdf' });\r\n                                    const url = URL.createObjectURL(blob);\r\n                                    window.open(url, '_blank');\r\n                                    return;\r\n                                }\r\n                            }\r\n                        } catch (eimg) {\r\n                            console.warn('[FinderView] failed to open embedded object:', eimg);\r\n                        }\r\n                    }\r\n\r\n                    // Otherwise fetch full file object from GitHub API\r\n                    if (API && typeof API.fetchRepoContents === 'function') {\r\n                        // show a lightweight loading state\r\n                        this.dom.content!.innerHTML = '<div class=\"p-4 text-sm opacity-80\">Lade Datei‚Ä¶</div>';\r\n                        const fileObj = await API.fetchRepoContents(username, repo, subPath);\r\n                        // If the API returned a direct download URL (common in mocks), prefer that for binaries\r\n                        if (fileObj && fileObj.download_url) {\r\n                            try {\r\n                                if (imageExts.has(ext)) {\r\n                                    const url = fileObj.download_url;\r\n                                    try {\r\n                                        const resp = await fetch(url);\r\n                                        if (resp.ok) {\r\n                                            const blob = await resp.blob();\r\n                                            const obj = URL.createObjectURL(blob);\r\n                                            PreviewInstanceManager.openImages([obj], 0, subPath);\r\n                                            this._renderAll();\r\n                                            return;\r\n                                        }\r\n                                    } catch (ef) {\r\n                                        console.warn('[FinderView] failed to fetch image download_url:', ef);\r\n                                    }\r\n                                    window.open(fileObj.download_url, '_blank');\r\n                                    this._renderAll();\r\n                                    return;\r\n                                }\r\n                                if (pdfExts.has(ext)) {\r\n                                    window.open(fileObj.download_url, '_blank');\r\n                                    this._renderAll();\r\n                                    return;\r\n                                }\r\n                            } catch (eurl) {\r\n                                console.warn('[FinderView] failed to open download_url:', eurl);\r\n                            }\r\n                        }\r\n\r\n                        // If fileObj contains base64 content we can handle text, images and pdfs\r\n                        if (fileObj && fileObj.content && fileObj.encoding === 'base64') {\r\n                            const rawBase64 = (fileObj.content || '').replace(/\\n/g, '');\r\n                            const rawText = atob(rawBase64);\r\n                            if (textExts.has(ext)) {\r\n                                openInTextEditor(name, rawText, { repo, path: subPath });\r\n                                this._renderAll();\r\n                                return;\r\n                            }\r\n                            try {\r\n                                if (imageExts.has(ext)) {\r\n                                    const bytes = atob(rawBase64);\r\n                                    const arr = new Uint8Array(bytes.length);\r\n                                    for (let i = 0; i < bytes.length; i++) arr[i] = bytes.charCodeAt(i);\r\n                                    const mimeMap: Record<string, string> = { jpg: 'image/jpeg', jpeg: 'image/jpeg', png: 'image/png', gif: 'image/gif', webp: 'image/webp', svg: 'image/svg+xml', bmp: 'image/bmp', ico: 'image/x-icon', tiff: 'image/tiff' };\r\n                                    const mime = mimeMap[ext] || 'application/octet-stream';\r\n                                    const blob = new Blob([arr], { type: mime });\r\n                                    const url = URL.createObjectURL(blob);\r\n                                    if (PreviewInstanceManager && typeof PreviewInstanceManager.openImages === 'function') {\r\n                                        PreviewInstanceManager.openImages([url], 0, subPath);\r\n                                    } else {\r\n                                        window.open(url, '_blank');\r\n                                    }\r\n                                    this._renderAll();\r\n                                    return;\r\n                                }\r\n                                if (pdfExts.has(ext)) {\r\n                                    const bytes = atob(rawBase64);\r\n                                    const arr = new Uint8Array(bytes.length);\r\n                                    for (let i = 0; i < bytes.length; i++) arr[i] = bytes.charCodeAt(i);\r\n                                    const blob = new Blob([arr], { type: 'application/pdf' });\r\n                                    const url = URL.createObjectURL(blob);\r\n                                    window.open(url, '_blank');\r\n                                    this._renderAll();\r\n                                    return;\r\n                                }\r\n                            } catch (e2) {\r\n                                console.warn('[FinderView] Failed to open binary file:', e2);\r\n                            }\r\n                        } else {\r\n                            const raw = fileObj ? fileObj.content || '' : '';\r\n                            if (textExts.has(ext)) {\r\n                                openInTextEditor(name, raw, { repo, path: subPath });\r\n                                this._renderAll();\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                } catch (e: any) {\r\n                    console.warn('[FinderView] Failed to load GitHub file:', e);\r\n                    this._renderAll();\r\n                }\r\n            }\r\n\r\n            // If nothing opened, leave selection (future: open images/pdf in viewer)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Navigate to a recent file's original location\r\n     */\r\n    private navigateToRecentFile(fullPath: string): void {\r\n        // Parse path: e.g., \"home/marvin/Documents/notes.txt\"\r\n        const parts = fullPath.split('/').filter(Boolean);\r\n        if (parts.length === 0) return;\r\n\r\n        const fileName = parts[parts.length - 1];\r\n        if (!fileName) return;\r\n\r\n        const folderParts = parts.slice(0, -1);\r\n\r\n        // Switch to computer view and navigate to the folder\r\n        this.source = 'computer';\r\n        this.currentPath = folderParts;\r\n        this._persistState();\r\n        this._renderAll();\r\n\r\n        // Select the file\r\n        this._selectItem(fileName);\r\n    }\r\n\r\n    navigateToFolder(name: string): void {\r\n        if (this.source === 'github') {\r\n            this.currentPath = [...this.currentPath, name];\r\n            this._persistState();\r\n            this._renderAll();\r\n            return;\r\n        }\r\n        // Check VirtualFS if folder exists\r\n        const targetPath =\r\n            this.currentPath.length === 0 ? ['/', name] : ['/', ...this.currentPath, name];\r\n        const folder = VirtualFS.getFolder(targetPath);\r\n        if (folder) {\r\n            this.currentPath = [...this.currentPath, name];\r\n            this._persistState();\r\n            this._renderAll();\r\n        }\r\n    }\r\n\r\n    navigateUp(): void {\r\n        if (this.currentPath.length === 0) return;\r\n        this.currentPath = this.currentPath.slice(0, -1);\r\n        this._persistState();\r\n        this._renderAll();\r\n    }\r\n\r\n    goRoot(): void {\r\n        this.currentPath = [];\r\n        this._persistState();\r\n        this._renderAll();\r\n    }\r\n\r\n    navigateToPath(parts: string[]): void {\r\n        this.currentPath = parts;\r\n        this._persistState();\r\n        this._renderAll();\r\n    }\r\n\r\n    setViewMode(mode: ViewMode): void {\r\n        this.viewMode = mode;\r\n        this.updateContentState({ viewMode: this.viewMode });\r\n        this.renderContent();\r\n    }\r\n\r\n    setSortBy(sortBy: 'name' | 'date' | 'size' | 'type'): void {\r\n        this.sortBy = sortBy;\r\n        this._persistState();\r\n        this.renderContent();\r\n    }\r\n\r\n    setSortOrder(order: 'asc' | 'desc'): void {\r\n        this.sortOrder = order;\r\n        this._persistState();\r\n        this.renderContent();\r\n    }\r\n\r\n    // --- Favorites System ---\r\n    toggleFavorite(path: string): void {\r\n        if (this.favorites.has(path)) {\r\n            this.favorites.delete(path);\r\n        } else {\r\n            this.favorites.add(path);\r\n        }\r\n        this._persistState();\r\n        this.renderContent();\r\n    }\r\n\r\n    getFavoriteItems(): FileItem[] {\r\n        const items: FileItem[] = [];\r\n        for (const path of this.favorites) {\r\n            const parts = path.split('/');\r\n            const name = parts[parts.length - 1] || 'Unknown';\r\n            items.push({\r\n                name,\r\n                type: 'folder',\r\n                icon: '‚≠ê',\r\n                modified: new Date().toISOString(),\r\n            });\r\n        }\r\n        return items;\r\n    }\r\n\r\n    // --- Recent Files System (Global Shared) ---\r\n    private static RECENT_FILES_KEY = 'finder-recent-files';\r\n    private static MAX_RECENT_FILES = 20;\r\n\r\n    /**\r\n     * Load recent files from global storage\r\n     */\r\n    private static loadRecentFiles(): RecentFile[] {\r\n        try {\r\n            const stored = localStorage.getItem(FinderView.RECENT_FILES_KEY);\r\n            if (stored) {\r\n                return JSON.parse(stored) as RecentFile[];\r\n            }\r\n        } catch (e) {\r\n            console.warn('[FinderView] Failed to load recent files:', e);\r\n        }\r\n        return FinderView.getDefaultRecentFiles();\r\n    }\r\n\r\n    /**\r\n     * Save recent files to global storage\r\n     */\r\n    private static saveRecentFiles(files: RecentFile[]): void {\r\n        try {\r\n            localStorage.setItem(FinderView.RECENT_FILES_KEY, JSON.stringify(files));\r\n        } catch (e) {\r\n            console.warn('[FinderView] Failed to save recent files:', e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get default recent files (with examples)\r\n     */\r\n    private static getDefaultRecentFiles(): RecentFile[] {\r\n        const now = new Date().toISOString();\r\n        const yesterday = new Date(Date.now() - 86400000).toISOString();\r\n        const twoDaysAgo = new Date(Date.now() - 172800000).toISOString();\r\n\r\n        return [\r\n            {\r\n                name: 'README.md',\r\n                path: 'home/marvin/README.md',\r\n                icon: 'üìù',\r\n                modified: now,\r\n            },\r\n            {\r\n                name: 'notes.txt',\r\n                path: 'home/marvin/Documents/notes.txt',\r\n                icon: 'üìù',\r\n                modified: yesterday,\r\n            },\r\n            {\r\n                name: 'project-plan.md',\r\n                path: 'home/marvin/Documents/project-plan.md',\r\n                icon: 'üìù',\r\n                modified: twoDaysAgo,\r\n            },\r\n        ];\r\n    }\r\n\r\n    addToRecent(name: string): void {\r\n        // Build full path from current location\r\n        const pathParts = this.source === 'computer' ? this.currentPath : [];\r\n        const fullPath = pathParts.length > 0 ? pathParts.join('/') + '/' + name : name;\r\n\r\n        // Determine icon based on file extension\r\n        const ext = name.split('.').pop()?.toLowerCase() || '';\r\n        let icon = 'üìÑ';\r\n        if (['md', 'txt'].includes(ext)) icon = 'üìù';\r\n        else if (['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(ext)) icon = 'üñºÔ∏è';\r\n        else if (['pdf'].includes(ext)) icon = 'ÔøΩ';\r\n        else if (['zip', 'tar', 'gz'].includes(ext)) icon = 'ÔøΩ';\r\n\r\n        const recentFile: RecentFile = {\r\n            name,\r\n            path: fullPath,\r\n            icon,\r\n            modified: new Date().toISOString(),\r\n        };\r\n\r\n        // Load current global list\r\n        const recentFiles = FinderView.loadRecentFiles();\r\n\r\n        // Remove duplicate if exists\r\n        const filtered = recentFiles.filter(f => f.path !== fullPath);\r\n\r\n        // Add to front\r\n        filtered.unshift(recentFile);\r\n\r\n        // Limit to maxRecentFiles\r\n        const limited = filtered.slice(0, FinderView.MAX_RECENT_FILES);\r\n\r\n        // Save back to global storage\r\n        FinderView.saveRecentFiles(limited);\r\n\r\n        // Update local instance reference\r\n        this.recentFiles = limited;\r\n        this._persistState();\r\n    }\r\n\r\n    getRecentItems(): FileItem[] {\r\n        // Always load fresh from global storage\r\n        const recentFiles = FinderView.loadRecentFiles();\r\n        // Note: recentFiles is already sorted with newest first (unshift in addToRecent)\r\n        // So we can return them directly without additional sorting\r\n        return recentFiles.map(rf => ({\r\n            name: rf.name,\r\n            type: 'file' as const,\r\n            icon: rf.icon,\r\n            modified: rf.modified,\r\n            // Store path in a data attribute for navigation\r\n            path: rf.path,\r\n        }));\r\n    }\r\n\r\n    // --- Search Function ---\r\n    filterItems(items: FileItem[], searchTerm: string): FileItem[] {\r\n        if (!searchTerm || searchTerm.trim() === '') {\r\n            return items;\r\n        }\r\n        const term = searchTerm.toLowerCase();\r\n        return items.filter(item => item.name.toLowerCase().includes(term));\r\n    }\r\n\r\n    // --- State Persistence ---\r\n    private _persistState(): void {\r\n        // Update content state without triggering recursion\r\n        this.contentState = {\r\n            currentPath: this.currentPath,\r\n            viewMode: this.viewMode,\r\n            sortBy: this.sortBy,\r\n            sortOrder: this.sortOrder,\r\n            favorites: Array.from(this.favorites),\r\n            recentFiles: this.recentFiles,\r\n            sidebarWidth: this.sidebarWidth,\r\n        };\r\n        this.metadata.modified = Date.now();\r\n\r\n        // Trigger parent window to save its state (which includes all tabs)\r\n        if (this.parentWindow) {\r\n            (this.parentWindow as any)._saveState?.();\r\n        }\r\n    }\r\n\r\n    serialize(): any {\r\n        return {\r\n            ...super.serialize(),\r\n            source: this.source,\r\n            currentPath: this.currentPath,\r\n            viewMode: this.viewMode,\r\n            sortBy: this.sortBy,\r\n            sortOrder: this.sortOrder,\r\n            favorites: Array.from(this.favorites),\r\n            recentFiles: this.recentFiles,\r\n        };\r\n    }\r\n\r\n    static deserialize(state: any): FinderView {\r\n        const view = new FinderView({\r\n            id: state.id,\r\n            title: state.title || (state.source === 'github' ? 'GitHub' : 'Computer'),\r\n            icon: state.icon || (state.source === 'github' ? 'üì¶' : 'üíª'),\r\n            source: (state.source as FinderSource) || 'computer',\r\n            content: {\r\n                ...state.contentState,\r\n                favorites: state.favorites || state.contentState?.favorites || [],\r\n                recentFiles: state.recentFiles || state.contentState?.recentFiles || [],\r\n                sidebarWidth: state.sidebarWidth || state.contentState?.sidebarWidth || 192,\r\n            },\r\n        });\r\n        view.currentPath = state.currentPath || [];\r\n        view.viewMode = state.viewMode || 'list';\r\n        view.sortBy = state.sortBy || 'name';\r\n        view.sortOrder = state.sortOrder || 'asc';\r\n        return view;\r\n    }\r\n\r\n    // --- GitHub Integration ---\r\n    private getGithubUsername(): string {\r\n        const w = window as any;\r\n        return w.GITHUB_USERNAME || 'Marormur';\r\n    }\r\n\r\n    private getAPI(): any {\r\n        const w = window as any;\r\n        return w.GitHubAPI || null;\r\n    }\r\n\r\n    async renderGithubContent(): Promise<void> {\r\n        if (!this.dom.content) return;\r\n        const API = this.getAPI();\r\n        const username = this.getGithubUsername();\r\n        this.dom.content.innerHTML = '<div class=\"p-4 text-sm opacity-80\">Lade GitHub‚Ä¶</div>';\r\n\r\n        if (!API) {\r\n            this.dom.content.innerHTML =\r\n                '<div class=\"p-4 text-sm text-red-500\">GitHubAPI nicht geladen</div>';\r\n            return;\r\n        }\r\n\r\n        try {\r\n            if (this.currentPath.length === 0) {\r\n                // Repos\r\n                const cacheKey = 'repos';\r\n                let repos: any;\r\n\r\n                // Check our internal cache first\r\n                const cached = this._readGithubCache(cacheKey);\r\n                if (cached) {\r\n                    repos = cached;\r\n                } else {\r\n                    // Check API cache\r\n                    const apiCached = API.readCache('repos');\r\n                    repos = apiCached ?? (await API.fetchUserRepos(username));\r\n                    if (!apiCached) API.writeCache('repos', '', '', repos);\r\n                    this._writeGithubCache(cacheKey, repos);\r\n                }\r\n\r\n                this.githubRepos = Array.isArray(repos) ? repos : [];\r\n                const items: FileItem[] = this.githubRepos.map((repo: any) => ({\r\n                    name: repo.name,\r\n                    type: 'folder',\r\n                    icon: 'üì¶',\r\n                }));\r\n                this.lastGithubItemsMap.clear();\r\n                items.forEach(it => this.lastGithubItemsMap.set(it.name, it));\r\n\r\n                // Apply search filter for GitHub too\r\n                const filtered = this.filterItems(items, this.searchTerm);\r\n                this.renderListView(this.sortItems(filtered));\r\n            } else {\r\n                // Repo contents\r\n                const repo = this.currentPath[0];\r\n                const subPath = this.currentPath.slice(1).join('/');\r\n                const cacheKey = `${repo}/${subPath}`;\r\n                let contents: any;\r\n\r\n                // Check our internal cache first\r\n                const cached = this._readGithubCache(cacheKey);\r\n                if (cached) {\r\n                    contents = cached;\r\n                } else {\r\n                    // Check API cache\r\n                    const apiCached = API.readCache('contents', repo, subPath);\r\n                    contents = apiCached ?? (await API.fetchRepoContents(username, repo, subPath));\r\n                    if (!apiCached) API.writeCache('contents', repo, subPath, contents);\r\n                    this._writeGithubCache(cacheKey, contents);\r\n                }\r\n\r\n                const items: FileItem[] = (Array.isArray(contents) ? contents : []).map(\r\n                    (it: any) => ({\r\n                        name: it.name,\r\n                        type: it.type === 'dir' ? 'folder' : 'file',\r\n                        icon: it.type === 'dir' ? 'üìÅ' : 'üìÑ',\r\n                        size: it.size ?? 0,\r\n                        modified: it.git_url ? undefined : undefined,\r\n                    })\r\n                );\r\n                this.lastGithubItemsMap.clear();\r\n                (Array.isArray(contents) ? contents : []).forEach((it: any) =>\r\n                    this.lastGithubItemsMap.set(it.name, it)\r\n                );\r\n\r\n                // Apply search filter for GitHub too\r\n                const filtered = this.filterItems(items, this.searchTerm);\r\n                this.renderListView(this.sortItems(filtered));\r\n            }\r\n        } catch (e: any) {\r\n            this.githubError = true;\r\n            this.githubErrorMessage = e?.message || 'Unbekannter Fehler';\r\n            this.dom.content.innerHTML = `<div class=\"p-4 text-sm text-red-500\">GitHub Fehler: ${this.githubErrorMessage}</div>`;\r\n        }\r\n    }\r\n\r\n    // --- GitHub Cache Helpers ---\r\n    /**\r\n     * Kleines In‚ÄëMemory‚ÄëTTL‚ÄëCache pro FinderView. Verhindert √ºberm√§√üige Re‚ÄëRenders\r\n     * und beschleunigt Navigieren zwischen Ordnern/Repos.\r\n     */\r\n    private _readGithubCache(key: string): any | null {\r\n        const cached = this.githubContentCache.get(key);\r\n        if (!cached) return null;\r\n\r\n        const now = Date.now();\r\n        if (now - cached.timestamp > this.cacheTTL) {\r\n            // Cache expired\r\n            this.githubContentCache.delete(key);\r\n            return null;\r\n        }\r\n\r\n        return cached.data;\r\n    }\r\n\r\n    /** Schreibt einen Eintrag in den In‚ÄëMemory‚ÄëCache. */\r\n    private _writeGithubCache(key: string, data: any): void {\r\n        this.githubContentCache.set(key, {\r\n            data,\r\n            timestamp: Date.now(),\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Ermittelt den sichtbaren Tab‚ÄëTitel: Am Root z. B. ‚ÄûGitHub‚Äú/‚ÄûComputer‚Äú,\r\n     * ansonsten der letzte Pfadteil. Dadurch entspricht der Tab immer dem Kontext.\r\n     */\r\n    private _updateTabLabel(): void {\r\n        const w = window as any;\r\n        const t = (key: string, fb: string) =>\r\n            w.appI18n ? w.appI18n.translate(key, {}, { fallback: fb }) : fb;\r\n\r\n        let label = '';\r\n        const atRoot = this.currentPath.length === 0;\r\n        switch (this.source) {\r\n            case 'computer':\r\n                label = atRoot\r\n                    ? t('finder.sidebar.computer', 'Computer')\r\n                    : this.currentPath[this.currentPath.length - 1];\r\n                break;\r\n            case 'github':\r\n                // At root show generic GitHub view label, otherwise last path segment (repo or folder)\r\n                label = atRoot\r\n                    ? 'GitHub'\r\n                    : this.currentPath[this.currentPath.length - 1] || 'GitHub';\r\n                break;\r\n            case 'recent':\r\n                label = t('finder.sidebar.recent', 'Zuletzt verwendet');\r\n                break;\r\n            case 'starred':\r\n                label = t('finder.sidebar.starred', 'Markiert');\r\n                break;\r\n            default:\r\n                label = this.title || 'Finder';\r\n        }\r\n\r\n        if (this.title !== label) {\r\n            this.setTitle(label);\r\n        }\r\n    }\r\n}\r\n\r\n(window as any).FinderView = FinderView;\r\n"]}