{"version":3,"file":"settings.js","sourceRoot":"","sources":["../src/ts/settings.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * settings.ts\r\n * Settings Module - Inline settings UI with theme and language preferences\r\n */\r\n\r\nconsole.log('Settings Module loaded');\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    // ===== Types =====\r\n\r\n    type SectionName = 'general' | 'display' | 'language';\r\n\r\n    interface SettingsSystemType {\r\n        currentSection: SectionName;\r\n        container: HTMLElement | null;\r\n        init(containerOrId: HTMLElement | string): void;\r\n        render(): void;\r\n        attachListeners(): void;\r\n        syncThemePreference(): void;\r\n        syncLanguagePreference(): void;\r\n        showSection(section: SectionName): void;\r\n        destroy(): void;\r\n    }\r\n\r\n    // ===== Settings System Implementation =====\r\n\r\n    const SettingsSystem: SettingsSystemType = {\r\n        currentSection: 'general',\r\n        container: null,\r\n\r\n        /**\r\n         * Initialize settings module in container\r\n         */\r\n        init(containerOrId: HTMLElement | string): void {\r\n            const container =\r\n                typeof containerOrId === 'string'\r\n                    ? document.getElementById(containerOrId)\r\n                    : containerOrId;\r\n\r\n            if (!container) {\r\n                console.error('Settings container not found:', containerOrId);\r\n                return;\r\n            }\r\n\r\n            this.container = container;\r\n            this.render();\r\n            this.attachListeners();\r\n            this.syncThemePreference();\r\n            this.syncLanguagePreference();\r\n            this.showSection('general');\r\n        },\r\n\r\n        /**\r\n         * Render settings UI\r\n         */\r\n        render(): void {\r\n            if (!this.container) return;\r\n\r\n            this.container.innerHTML = `\r\n                <div class=\"flex dialog-content settings-panel rounded-b-xl overflow-hidden h-full\">\r\n                    <!-- Linke Seitenleiste -->\r\n                    <div class=\"w-48 bg-gray-100 dark:bg-gray-700 p-4 space-y-1 overflow-auto\">\r\n                        <button type=\"button\" class=\"w-full text-left cursor-pointer px-2 py-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded no-select\"\r\n                            data-action=\"settings:showSection\"\r\n                            data-section=\"general\"\r\n                            data-settings-page=\"general\"\r\n                            data-i18n=\"settingsPage.nav.general\">\r\n                            üë§ Allgemein\r\n                        </button>\r\n                        <button type=\"button\" class=\"w-full text-left cursor-pointer px-2 py-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded no-select\"\r\n                            data-action=\"settings:showSection\"\r\n                            data-section=\"display\"\r\n                            data-settings-page=\"display\"\r\n                            data-i18n=\"settingsPage.nav.display\">\r\n                            üñ•Ô∏è Darstellung\r\n                        </button>\r\n                        <button type=\"button\" class=\"w-full text-left cursor-pointer px-2 py-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded no-select\"\r\n                            data-action=\"settings:showSection\"\r\n                            data-section=\"language\"\r\n                            data-settings-page=\"language\"\r\n                            data-i18n=\"settingsPage.nav.language\">\r\n                            üåê Sprache\r\n                        </button>\r\n                    </div>\r\n                    <!-- Rechte Hauptansicht -->\r\n                    <div class=\"flex-1 p-6 overflow-auto text-gray-800 dark:text-gray-200\">\r\n                        <!-- Sektion: Allgemein -->\r\n                        <div id=\"settings-general\" class=\"\">\r\n                            <div class=\"flex flex-col items-start text-gray-700 dark:text-gray-200 mt-8 w-full space-y-4\">\r\n                                <img src=\"./img/profil.jpg\" alt=\"Bild\" class=\"w-24 h-24 object-contain mb-2\">\r\n                                <h2 class=\"text-xl font-semibold\" data-i18n=\"settingsPage.general.name\">Marvin Temmen</h2>\r\n                                <p class=\"text-sm\" data-i18n=\"settingsPage.general.birth\">M√§rz 1999</p>\r\n                                <div class=\"bg-gray-200 dark:bg-gray-700 rounded-lg p-4 w-full grid grid-cols-1 sm:grid-cols-2 gap-y-2 gap-x-8\">\r\n                                    <div class=\"text-gray-600 dark:text-gray-300\" data-i18n=\"settingsPage.general.locationLabel\">Wohnort</div>\r\n                                    <div class=\"text-gray-800 dark:text-gray-100\" data-i18n=\"settingsPage.general.locationValue\">Deutschland</div>\r\n                                    <div class=\"text-gray-600 dark:text-gray-300\" data-i18n=\"settingsPage.general.jobLabel\">Beruf</div>\r\n                                    <div class=\"text-gray-800 dark:text-gray-100\" data-i18n=\"settingsPage.general.jobValue\">Softwareentwickler</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <!-- Sektion: Darstellung -->\r\n                        <div id=\"settings-display\" class=\"hidden\">\r\n                            <div class=\"flex flex-col gap-6 mt-4 w-full\">\r\n                                <div>\r\n                                    <h2 class=\"text-lg font-semibold text-gray-800 dark:text-gray-100\"\r\n                                        data-i18n=\"settingsPage.display.title\">Darstellung</h2>\r\n                                    <p class=\"text-sm text-gray-600 dark:text-gray-300 mt-1\"\r\n                                        data-i18n=\"settingsPage.display.description\">\r\n                                        Passe das visuelle Erscheinungsbild der Oberfl√§che an.\r\n                                    </p>\r\n                                </div>\r\n                                <fieldset class=\"bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 space-y-3\">\r\n                                    <legend class=\"text-sm font-medium text-gray-700 dark:text-gray-200 px-1\"\r\n                                        data-i18n=\"settingsPage.display.legend\">Darkmode</legend>\r\n                                    <label class=\"flex items-center gap-3 cursor-pointer select-none\">\r\n                                        <input type=\"radio\" name=\"theme-mode\" value=\"system\" class=\"h-4 w-4 text-blue-600 focus:ring-blue-500\">\r\n                                        <div>\r\n                                            <span class=\"block text-sm font-medium text-gray-800 dark:text-gray-100\"\r\n                                                data-i18n=\"settingsPage.display.options.system.label\">System</span>\r\n                                            <span class=\"block text-xs text-gray-600 dark:text-gray-300\"\r\n                                                data-i18n=\"settingsPage.display.options.system.description\">Folgt den aktuellen Systemeinstellungen.</span>\r\n                                        </div>\r\n                                    </label>\r\n                                    <label class=\"flex items-center gap-3 cursor-pointer select-none\">\r\n                                        <input type=\"radio\" name=\"theme-mode\" value=\"light\" class=\"h-4 w-4 text-blue-600 focus:ring-blue-500\">\r\n                                        <div>\r\n                                            <span class=\"block text-sm font-medium text-gray-800 dark:text-gray-100\"\r\n                                                data-i18n=\"settingsPage.display.options.light.label\">Hell</span>\r\n                                            <span class=\"block text-xs text-gray-600 dark:text-gray-300\"\r\n                                                data-i18n=\"settingsPage.display.options.light.description\">Bleibt immer im hellen Erscheinungsbild.</span>\r\n                                        </div>\r\n                                    </label>\r\n                                    <label class=\"flex items-center gap-3 cursor-pointer select-none\">\r\n                                        <input type=\"radio\" name=\"theme-mode\" value=\"dark\" class=\"h-4 w-4 text-blue-600 focus:ring-blue-500\">\r\n                                        <div>\r\n                                            <span class=\"block text-sm font-medium text-gray-800 dark:text-gray-100\"\r\n                                                data-i18n=\"settingsPage.display.options.dark.label\">Dunkel</span>\r\n                                            <span class=\"block text-xs text-gray-600 dark:text-gray-300\"\r\n                                                data-i18n=\"settingsPage.display.options.dark.description\">Bleibt immer im dunklen Erscheinungsbild.</span>\r\n                                        </div>\r\n                                    </label>\r\n                                </fieldset>\r\n                            </div>\r\n                        </div>\r\n                        <!-- Sektion: Sprache -->\r\n                        <div id=\"settings-language\" class=\"hidden\">\r\n                            <div class=\"flex flex-col gap-6 mt-4 w-full\">\r\n                                <div>\r\n                                    <h2 class=\"text-lg font-semibold text-gray-800 dark:text-gray-100\"\r\n                                        data-i18n=\"settingsPage.language.title\">Sprache</h2>\r\n                                    <p class=\"text-sm text-gray-600 dark:text-gray-300 mt-1\"\r\n                                        data-i18n=\"settingsPage.language.description\">\r\n                                        W√§hle, in welcher Sprache die Oberfl√§che angezeigt wird.\r\n                                    </p>\r\n                                </div>\r\n                                <fieldset class=\"bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 space-y-3\">\r\n                                    <legend class=\"text-sm font-medium text-gray-700 dark:text-gray-200 px-1\"\r\n                                        data-i18n=\"settingsPage.language.legend\">Bevorzugte Sprache</legend>\r\n                                    <label class=\"flex items-center gap-3 cursor-pointer select-none\">\r\n                                        <input type=\"radio\" name=\"language-preference\" value=\"system\"\r\n                                            class=\"h-4 w-4 text-blue-600 focus:ring-blue-500\">\r\n                                        <div>\r\n                                            <span class=\"block text-sm font-medium text-gray-800 dark:text-gray-100\"\r\n                                                data-i18n=\"settingsPage.language.options.system.label\">System</span>\r\n                                            <span class=\"block text-xs text-gray-600 dark:text-gray-300\"\r\n                                                data-i18n=\"settingsPage.language.options.system.description\">Verwendet automatisch die Sprache deines Systems.</span>\r\n                                        </div>\r\n                                    </label>\r\n                                    <label class=\"flex items-center gap-3 cursor-pointer select-none\">\r\n                                        <input type=\"radio\" name=\"language-preference\" value=\"de\"\r\n                                            class=\"h-4 w-4 text-blue-600 focus:ring-blue-500\">\r\n                                        <div>\r\n                                            <span class=\"block text-sm font-medium text-gray-800 dark:text-gray-100\"\r\n                                                data-i18n=\"settingsPage.language.options.de.label\">Deutsch</span>\r\n                                            <span class=\"block text-xs text-gray-600 dark:text-gray-300\"\r\n                                                data-i18n=\"settingsPage.language.options.de.description\">Zeigt Inhalte immer auf Deutsch.</span>\r\n                                        </div>\r\n                                    </label>\r\n                                    <label class=\"flex items-center gap-3 cursor-pointer select-none\">\r\n                                        <input type=\"radio\" name=\"language-preference\" value=\"en\"\r\n                                            class=\"h-4 w-4 text-blue-600 focus:ring-blue-500\">\r\n                                        <div>\r\n                                            <span class=\"block text-sm font-medium text-gray-800 dark:text-gray-100\"\r\n                                                data-i18n=\"settingsPage.language.options.en.label\">Englisch</span>\r\n                                            <span class=\"block text-xs text-gray-600 dark:text-gray-300\"\r\n                                                data-i18n=\"settingsPage.language.options.en.description\">Zeigt Inhalte immer auf Englisch.</span>\r\n                                        </div>\r\n                                    </label>\r\n                                </fieldset>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            `;\r\n\r\n            // Apply i18n translations\r\n            const appI18n = (window as Window & { appI18n?: { applyTranslations(el: HTMLElement): void } }).appI18n;\r\n            if (appI18n?.applyTranslations) {\r\n                appI18n.applyTranslations(this.container);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Attach event listeners\r\n         */\r\n        attachListeners(): void {\r\n            if (!this.container) return;\r\n\r\n            // Theme preference change listeners\r\n            const themeRadios = this.container.querySelectorAll<HTMLInputElement>('input[name=\"theme-mode\"]');\r\n            themeRadios.forEach(radio => {\r\n                radio.addEventListener('change', () => {\r\n                    if (!radio.checked) return;\r\n\r\n                    const theme = radio.value;\r\n                    // Call global API if available\r\n                    const API = (window as Window & { API?: { theme?: { setThemePreference(mode: string): void } } }).API;\r\n                    if (API?.theme?.setThemePreference) {\r\n                        API.theme.setThemePreference(theme);\r\n                    } else {\r\n                        // Fallback to ThemeSystem\r\n                        const ThemeSystem = (window as Window & { ThemeSystem?: { setThemePreference(mode: string): void } }).ThemeSystem;\r\n                        if (ThemeSystem?.setThemePreference) {\r\n                            ThemeSystem.setThemePreference(theme);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Language preference change listeners\r\n            const languageRadios = this.container.querySelectorAll<HTMLInputElement>('input[name=\"language-preference\"]');\r\n            languageRadios.forEach(radio => {\r\n                radio.addEventListener('change', () => {\r\n                    if (!radio.checked) return;\r\n\r\n                    const lang = radio.value;\r\n                    // Call global API if available\r\n                    const API = (window as Window & { API?: { i18n?: { setLanguagePreference(lang: string): void } } }).API;\r\n                    if (API?.i18n?.setLanguagePreference) {\r\n                        API.i18n.setLanguagePreference(lang);\r\n                    } else {\r\n                        // Fallback to appI18n\r\n                        const appI18n = (window as Window & { appI18n?: { setLanguagePreference(lang: string): void } }).appI18n;\r\n                        if (appI18n?.setLanguagePreference) {\r\n                            appI18n.setLanguagePreference(lang);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Sync theme preference from global state\r\n         */\r\n        syncThemePreference(): void {\r\n            if (!this.container) return;\r\n\r\n            let preference = 'system';\r\n            const API = (window as Window & { API?: { theme?: { getThemePreference(): string } } }).API;\r\n            const ThemeSystem = (window as Window & { ThemeSystem?: { getThemePreference(): string } }).ThemeSystem;\r\n\r\n            if (API?.theme?.getThemePreference) {\r\n                preference = API.theme.getThemePreference();\r\n            } else if (ThemeSystem?.getThemePreference) {\r\n                preference = ThemeSystem.getThemePreference();\r\n            }\r\n\r\n            const themeRadios = this.container.querySelectorAll<HTMLInputElement>('input[name=\"theme-mode\"]');\r\n            themeRadios.forEach(radio => {\r\n                radio.checked = radio.value === preference;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Sync language preference from global state\r\n         */\r\n        syncLanguagePreference(): void {\r\n            if (!this.container) return;\r\n\r\n            let preference = 'system';\r\n            const API = (window as Window & { API?: { i18n?: { getLanguagePreference(): string } } }).API;\r\n            const appI18n = (window as Window & { appI18n?: { getLanguagePreference(): string } }).appI18n;\r\n\r\n            if (API?.i18n?.getLanguagePreference) {\r\n                preference = API.i18n.getLanguagePreference();\r\n            } else if (appI18n?.getLanguagePreference) {\r\n                preference = appI18n.getLanguagePreference();\r\n            }\r\n\r\n            const languageRadios = this.container.querySelectorAll<HTMLInputElement>('input[name=\"language-preference\"]');\r\n            languageRadios.forEach(radio => {\r\n                radio.checked = radio.value === preference;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Show specific settings section\r\n         */\r\n        showSection(section: SectionName): void {\r\n            if (!this.container) return;\r\n\r\n            this.currentSection = section;\r\n\r\n            // Hide all sections\r\n            const sections: SectionName[] = ['general', 'display', 'language'];\r\n            sections.forEach(name => {\r\n                const el = this.container?.querySelector(`#settings-${name}`);\r\n                if (el) {\r\n                    el.classList.add('hidden');\r\n                }\r\n            });\r\n\r\n            // Show target section\r\n            const target = this.container.querySelector(`#settings-${section}`);\r\n            if (target) {\r\n                target.classList.remove('hidden');\r\n            }\r\n\r\n            // Update nav highlighting\r\n            const navItems = this.container.querySelectorAll('[data-action=\"settings:showSection\"]');\r\n            navItems.forEach(item => {\r\n                const itemSection = item.getAttribute('data-section');\r\n                if (itemSection === section) {\r\n                    item.classList.add(\r\n                        'bg-white',\r\n                        'dark:bg-gray-600',\r\n                        'text-gray-900',\r\n                        'dark:text-gray-100',\r\n                        'font-medium'\r\n                    );\r\n                } else {\r\n                    item.classList.remove(\r\n                        'bg-white',\r\n                        'dark:bg-gray-600',\r\n                        'text-gray-900',\r\n                        'dark:text-gray-100',\r\n                        'font-medium'\r\n                    );\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Destroy settings module\r\n         */\r\n        destroy(): void {\r\n            if (this.container) {\r\n                this.container.innerHTML = '';\r\n                this.container = null;\r\n            }\r\n        },\r\n    };\r\n\r\n    // Export to global scope\r\n    (window as Window & { SettingsSystem: SettingsSystemType }).SettingsSystem = SettingsSystem;\r\n\r\n    // Auto-init if container exists on load\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            const container = document.getElementById('settings-container');\r\n            if (container) {\r\n                SettingsSystem.init(container);\r\n            }\r\n        });\r\n    } else {\r\n        const container = document.getElementById('settings-container');\r\n        if (container) {\r\n            SettingsSystem.init(container);\r\n        }\r\n    }\r\n})();\r\n\r\nexport {};\r\n"]}