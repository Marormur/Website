{"version":3,"file":"text-editor-document.js","sourceRoot":"","sources":["../src/ts/text-editor-document.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * src/ts/text-editor-document.ts\r\n * Text editor document as a tab within an editor window\r\n */\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\n\r\nimport { BaseTab, type TabConfig } from './base-tab.js';\r\nimport { getString, setString } from './storage-utils.js';\r\n\r\ntype WrapMode = 'off' | 'soft';\r\n\r\n/**\r\n * TextEditorDocument - Individual document tab\r\n *\r\n * Features:\r\n * - Text editing with formatting\r\n * - Find & replace\r\n * - Word/character count\r\n * - Line/column tracking\r\n */\r\nexport class TextEditorDocument extends BaseTab {\r\n    editor: HTMLTextAreaElement | null;\r\n    statusBar: HTMLElement | null;\r\n    wordCountDisplay: HTMLElement | null;\r\n    lineColDisplay: HTMLElement | null;\r\n    findReplacePanel: HTMLElement | null;\r\n    findInput: HTMLInputElement | null;\r\n    replaceInput: HTMLInputElement | null;\r\n    fileInput: HTMLInputElement | null;\r\n\r\n    wrapMode: WrapMode;\r\n    filename: string;\r\n    isDirty: boolean;\r\n\r\n    constructor(config?: Partial<TabConfig>) {\r\n        super({\r\n            type: 'text-editor-document',\r\n            title: config?.title || 'Untitled.txt',\r\n            ...config,\r\n        });\r\n\r\n        this.editor = null;\r\n        this.statusBar = null;\r\n        this.wordCountDisplay = null;\r\n        this.lineColDisplay = null;\r\n        this.findReplacePanel = null;\r\n        this.findInput = null;\r\n        this.replaceInput = null;\r\n        this.fileInput = null;\r\n\r\n        this.wrapMode = 'off';\r\n        this.filename = this.title;\r\n        this.isDirty = false;\r\n    }\r\n\r\n    /**\r\n     * Create document DOM\r\n     */\r\n    createDOM(): HTMLElement {\r\n        const container = document.createElement('div');\r\n        container.id = `${this.id}-container`;\r\n        container.className = 'tab-content hidden w-full h-full';\r\n\r\n        const isDark = document.documentElement.classList.contains('dark');\r\n\r\n        container.innerHTML = `\r\n            <div class=\"text-editor-wrapper flex flex-col h-full\" style=\"background: ${isDark ? '#0f172a' : '#fafafa'}; color: ${isDark ? '#e5e7eb' : '#111827'};\">\r\n                <!-- Toolbar -->\r\n                <div class=\"text-editor-toolbar flex-none\" style=\"background: ${isDark ? '#1f2937' : '#f5f5f5'}; padding: 8px 12px; border-bottom: 1px solid ${isDark ? '#374151' : '#d1d5db'}; display: flex; gap: 8px; align-items: center; flex-wrap: wrap;\">\r\n                    <button type=\"button\" class=\"btn-new\" title=\"Neu\">Neu</button>\r\n                    <button type=\"button\" class=\"btn-open\" title=\"√ñffnen\">√ñffnen</button>\r\n                    <button type=\"button\" class=\"btn-save\" title=\"Speichern\">Speichern</button>\r\n                    <div style=\"width: 1px; height: 20px; background: ${isDark ? '#475569' : '#d1d5db'}; margin: 0 4px;\"></div>\r\n                    <button type=\"button\" class=\"btn-bold\" title=\"Fett\" style=\"font-weight: bold;\">B</button>\r\n                    <button type=\"button\" class=\"btn-italic\" title=\"Kursiv\" style=\"font-style: italic;\">I</button>\r\n                    <button type=\"button\" class=\"btn-underline\" title=\"Unterstrichen\" style=\"text-decoration: underline;\">U</button>\r\n                    <div style=\"width: 1px; height: 20px; background: ${isDark ? '#475569' : '#d1d5db'}; margin: 0 4px;\"></div>\r\n                    <button type=\"button\" class=\"btn-find\" title=\"Suchen\">üîç</button>\r\n                    <button type=\"button\" class=\"btn-wrap\" title=\"Zeilenumbruch\">‚èé</button>\r\n                    <input type=\"file\" class=\"file-input\" accept=\".txt,.md,.markdown\" style=\"display:none\">\r\n                </div>\r\n\r\n                <!-- Find/Replace Panel -->\r\n                <div class=\"find-replace-panel\" style=\"background: ${isDark ? '#1f2937' : '#f5f5f5'}; padding: 8px 12px; border-bottom: 1px solid ${isDark ? '#374151' : '#d1d5db'}; display: none; gap: 8px; align-items: center;\">\r\n                    <input type=\"text\" class=\"find-input\" placeholder=\"Suchen...\" style=\"padding: 4px 8px; border: 1px solid ${isDark ? '#475569' : '#d1d5db'}; border-radius: 4px; background: ${isDark ? '#111827' : '#ffffff'}; color: inherit;\">\r\n                    <input type=\"text\" class=\"replace-input\" placeholder=\"Ersetzen...\" style=\"padding: 4px 8px; border: 1px solid ${isDark ? '#475569' : '#d1d5db'}; border-radius: 4px; background: ${isDark ? '#111827' : '#ffffff'}; color: inherit;\">\r\n                    <button type=\"button\" class=\"btn-find-next\">Weiter</button>\r\n                    <button type=\"button\" class=\"btn-replace-one\">Ersetzen</button>\r\n                    <button type=\"button\" class=\"btn-replace-all\">Alle</button>\r\n                    <button type=\"button\" class=\"btn-close-find\">‚úï</button>\r\n                </div>\r\n\r\n                <!-- Status -->\r\n                <div class=\"status-bar\" style=\"padding: 6px 12px; border-bottom: 1px solid ${isDark ? '#374151' : '#d1d5db'}; background: ${isDark ? '#1f2937' : '#f5f5f5'}; font-size: 13px; display: none;\"></div>\r\n\r\n                <!-- Editor -->\r\n                <textarea class=\"text-editor-textarea flex-1 w-full resize-none p-4 border-0 outline-none\"\r\n                    spellcheck=\"false\"\r\n                    wrap=\"off\"\r\n                    style=\"background: ${isDark ? '#111827' : '#ffffff'}; color: inherit; font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, monospace; font-size: 14px; line-height: 1.6;\"\r\n                    placeholder=\"Text eingeben...\"></textarea>\r\n\r\n                <!-- Status Bar -->\r\n                <div class=\"editor-statusbar flex-none\" style=\"background: ${isDark ? '#1f2937' : '#f5f5f5'}; padding: 6px 12px; border-top: 1px solid ${isDark ? '#374151' : '#d1d5db'}; font-size: 12px; display: flex; justify-content: space-between;\">\r\n                    <span class=\"word-count\">W√∂rter: 0 | Zeichen: 0</span>\r\n                    <span class=\"line-col\">Zeile 1, Spalte 1</span>\r\n                </div>\r\n            </div>\r\n        `;\r\n\r\n        this.element = container;\r\n\r\n        // Get element references\r\n        this.editor = container.querySelector('.text-editor-textarea');\r\n        this.statusBar = container.querySelector('.status-bar');\r\n        this.wordCountDisplay = container.querySelector('.word-count');\r\n        this.lineColDisplay = container.querySelector('.line-col');\r\n        this.findReplacePanel = container.querySelector('.find-replace-panel');\r\n        this.findInput = container.querySelector('.find-input');\r\n        this.replaceInput = container.querySelector('.replace-input');\r\n        this.fileInput = container.querySelector('.file-input');\r\n\r\n        this._attachEventListeners();\r\n        this._applyButtonStyles();\r\n        this._loadWrapPreference();\r\n\r\n        // Load initial content if any\r\n        if (this.contentState && this.contentState.content && this.editor) {\r\n            this.editor.value = this.contentState.content;\r\n            this._updateWordCount();\r\n            this._updateCursorPosition();\r\n        }\r\n\r\n        return container;\r\n    }\r\n\r\n    private _attachEventListeners(): void {\r\n        if (!this.element) return;\r\n\r\n        // Editor events\r\n        this.editor?.addEventListener('input', () => this._handleInput());\r\n        this.editor?.addEventListener('click', () => this._updateCursorPosition());\r\n        this.editor?.addEventListener('keyup', () => this._updateCursorPosition());\r\n\r\n        // Toolbar buttons\r\n        this.element\r\n            .querySelector('.btn-new')\r\n            ?.addEventListener('click', () => this.clearContent());\r\n        this.element.querySelector('.btn-open')?.addEventListener('click', () => this.openFile());\r\n        this.element.querySelector('.btn-save')?.addEventListener('click', () => this.saveFile());\r\n        this.element\r\n            .querySelector('.btn-bold')\r\n            ?.addEventListener('click', () => this._wrapSelection('**', '**'));\r\n        this.element\r\n            .querySelector('.btn-italic')\r\n            ?.addEventListener('click', () => this._wrapSelection('*', '*'));\r\n        this.element\r\n            .querySelector('.btn-underline')\r\n            ?.addEventListener('click', () => this._wrapSelection('<u>', '</u>'));\r\n        this.element\r\n            .querySelector('.btn-find')\r\n            ?.addEventListener('click', () => this.toggleFindReplace());\r\n        this.element\r\n            .querySelector('.btn-wrap')\r\n            ?.addEventListener('click', () => this.toggleWrapMode());\r\n\r\n        // Find/Replace buttons\r\n        this.element\r\n            .querySelector('.btn-find-next')\r\n            ?.addEventListener('click', () => this.findNext());\r\n        this.element\r\n            .querySelector('.btn-replace-one')\r\n            ?.addEventListener('click', () => this.replaceOne());\r\n        this.element\r\n            .querySelector('.btn-replace-all')\r\n            ?.addEventListener('click', () => this.replaceAll());\r\n        this.element\r\n            .querySelector('.btn-close-find')\r\n            ?.addEventListener('click', () => this.closeFindReplace());\r\n\r\n        // File input\r\n        this.fileInput?.addEventListener('change', e => this._handleFileOpen(e));\r\n    }\r\n\r\n    private _applyButtonStyles(): void {\r\n        if (!this.element) return;\r\n        const isDark = document.documentElement.classList.contains('dark');\r\n        const buttons = this.element.querySelectorAll('button');\r\n        buttons.forEach(btn => {\r\n            btn.style.cssText = `\r\n                padding: 6px 12px;\r\n                font-size: 13px;\r\n                border: 1px solid ${isDark ? '#475569' : '#d1d5db'};\r\n                background: ${isDark ? '#111827' : '#ffffff'};\r\n                color: inherit;\r\n                border-radius: 6px;\r\n                cursor: pointer;\r\n            `;\r\n        });\r\n    }\r\n\r\n    private _handleInput(): void {\r\n        this.isDirty = true;\r\n        if (this.editor) {\r\n            this.updateContentState({ content: this.editor.value });\r\n            this._updateWordCount();\r\n        }\r\n    }\r\n\r\n    private _updateWordCount(): void {\r\n        if (!this.editor || !this.wordCountDisplay) return;\r\n        const text = this.editor.value;\r\n        const words = text.trim() ? text.trim().split(/\\s+/).length : 0;\r\n        const chars = text.length;\r\n        this.wordCountDisplay.textContent = `W√∂rter: ${words} | Zeichen: ${chars}`;\r\n    }\r\n\r\n    private _updateCursorPosition(): void {\r\n        if (!this.editor || !this.lineColDisplay) return;\r\n        const pos = this.editor.selectionStart;\r\n        const textBeforeCursor = this.editor.value.substring(0, pos);\r\n        const line = (textBeforeCursor.match(/\\n/g) || []).length + 1;\r\n        const lastNewline = textBeforeCursor.lastIndexOf('\\n');\r\n        const col = pos - lastNewline;\r\n        this.lineColDisplay.textContent = `Zeile ${line}, Spalte ${col}`;\r\n    }\r\n\r\n    clearContent(): void {\r\n        if (this.isDirty && !confirm('Ungespeicherte √Ñnderungen gehen verloren. Fortfahren?'))\r\n            return;\r\n        if (this.editor) this.editor.value = '';\r\n        this.filename = 'Untitled.txt';\r\n        this.isDirty = false;\r\n        this.setTitle(this.filename);\r\n        this.updateContentState({ content: '' });\r\n        this._updateWordCount();\r\n    }\r\n\r\n    openFile(): void {\r\n        this.fileInput?.click();\r\n    }\r\n\r\n    private _handleFileOpen(event: Event): void {\r\n        const target = event.target as HTMLInputElement;\r\n        const file = target?.files?.[0];\r\n        if (!file) return;\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = e => {\r\n            const content = (e.target as FileReader).result as string;\r\n            if (this.editor) this.editor.value = content;\r\n            this.filename = file.name;\r\n            this.setTitle(this.filename);\r\n            this.isDirty = false;\r\n            this.updateContentState({ content });\r\n            this._updateWordCount();\r\n            this._showStatus(`Ge√∂ffnet: ${file.name}`);\r\n        };\r\n        reader.readAsText(file);\r\n    }\r\n\r\n    saveFile(): void {\r\n        const content = this.editor?.value || '';\r\n        const blob = new Blob([content], { type: 'text/plain' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = this.filename;\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n        this.isDirty = false;\r\n        this._showStatus(`Gespeichert: ${this.filename}`);\r\n    }\r\n\r\n    private _wrapSelection(before: string, after: string): void {\r\n        if (!this.editor) return;\r\n        const start = this.editor.selectionStart;\r\n        const end = this.editor.selectionEnd;\r\n        const selectedText = this.editor.value.substring(start, end);\r\n        const replacement = before + selectedText + after;\r\n        this.editor.setRangeText(replacement, start, end, 'select');\r\n        this.editor.focus();\r\n        this._handleInput();\r\n    }\r\n\r\n    toggleWrapMode(): void {\r\n        this.wrapMode = this.wrapMode === 'soft' ? 'off' : 'soft';\r\n        if (this.editor) {\r\n            this.editor.wrap = this.wrapMode;\r\n            this.editor.style.whiteSpace = this.wrapMode === 'soft' ? 'pre-wrap' : 'pre';\r\n        }\r\n        try {\r\n            setString(`textEditorWrapMode_${this.id}`, this.wrapMode);\r\n        } catch (e) {\r\n            console.warn('Could not save wrap mode', e);\r\n        }\r\n        this.updateContentState({ wrapMode: this.wrapMode });\r\n    }\r\n\r\n    private _loadWrapPreference(): void {\r\n        try {\r\n            const saved = getString(`textEditorWrapMode_${this.id}`) as WrapMode | null;\r\n            if (saved && this.editor) {\r\n                this.wrapMode = saved;\r\n                this.editor.wrap = this.wrapMode;\r\n                this.editor.style.whiteSpace = this.wrapMode === 'soft' ? 'pre-wrap' : 'pre';\r\n            }\r\n        } catch (e) {\r\n            console.warn('Could not load wrap mode', e);\r\n        }\r\n    }\r\n\r\n    toggleFindReplace(): void {\r\n        if (!this.findReplacePanel) return;\r\n        const isHidden = this.findReplacePanel.style.display === 'none';\r\n        this.findReplacePanel.style.display = isHidden ? 'flex' : 'none';\r\n        if (isHidden && this.findInput) this.findInput.focus();\r\n        else this.editor?.focus();\r\n    }\r\n\r\n    closeFindReplace(): void {\r\n        if (this.findReplacePanel) {\r\n            this.findReplacePanel.style.display = 'none';\r\n            this.editor?.focus();\r\n        }\r\n    }\r\n\r\n    findNext(): void {\r\n        if (!this.findInput || !this.editor) return;\r\n        const searchText = this.findInput.value;\r\n        if (!searchText) return;\r\n        const content = this.editor.value;\r\n        const currentPos = this.editor.selectionEnd;\r\n        const index = content.indexOf(searchText, currentPos);\r\n        if (index !== -1) {\r\n            this.editor.setSelectionRange(index, index + searchText.length);\r\n            this.editor.focus();\r\n        } else {\r\n            const firstIndex = content.indexOf(searchText);\r\n            if (firstIndex !== -1) {\r\n                this.editor.setSelectionRange(firstIndex, firstIndex + searchText.length);\r\n                this.editor.focus();\r\n            }\r\n        }\r\n    }\r\n\r\n    replaceOne(): void {\r\n        if (!this.findInput || !this.replaceInput || !this.editor) return;\r\n        const searchText = this.findInput.value;\r\n        const replaceText = this.replaceInput.value;\r\n        if (!searchText) return;\r\n        const start = this.editor.selectionStart;\r\n        const end = this.editor.selectionEnd;\r\n        const selectedText = this.editor.value.substring(start, end);\r\n        if (selectedText === searchText) {\r\n            this.editor.setRangeText(replaceText, start, end, 'end');\r\n            this._handleInput();\r\n        }\r\n        this.findNext();\r\n    }\r\n\r\n    replaceAll(): void {\r\n        if (!this.findInput || !this.replaceInput || !this.editor) return;\r\n        const searchText = this.findInput.value;\r\n        const replaceText = this.replaceInput.value;\r\n        if (!searchText) return;\r\n        const count = (this.editor.value.match(new RegExp(searchText, 'g')) || []).length;\r\n        this.editor.value = this.editor.value.split(searchText).join(replaceText);\r\n        this._handleInput();\r\n        this._showStatus(`${count} Ersetzungen`);\r\n    }\r\n\r\n    private _showStatus(message: string): void {\r\n        if (!this.statusBar) return;\r\n        this.statusBar.textContent = message;\r\n        this.statusBar.style.display = 'block';\r\n        setTimeout(() => {\r\n            if (this.statusBar) this.statusBar.style.display = 'none';\r\n        }, 3000);\r\n    }\r\n\r\n    /**\r\n     * Serialize document state\r\n     */\r\n    serialize(): any {\r\n        return {\r\n            ...super.serialize(),\r\n            filename: this.filename,\r\n            wrapMode: this.wrapMode,\r\n            isDirty: this.isDirty,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Restore document from state\r\n     */\r\n    static deserialize(state: any): TextEditorDocument {\r\n        const doc = new TextEditorDocument({\r\n            id: state.id,\r\n            title: state.title || state.filename,\r\n            content: state.contentState,\r\n        });\r\n\r\n        if (state.filename) doc.filename = state.filename;\r\n        if (state.wrapMode) doc.wrapMode = state.wrapMode;\r\n        if (state.isDirty !== undefined) doc.isDirty = state.isDirty;\r\n\r\n        return doc;\r\n    }\r\n\r\n    /**\r\n     * Focus editor when tab is shown\r\n     */\r\n    protected onShow(): void {\r\n        if (this.editor && typeof this.editor.focus === 'function') {\r\n            this.editor.focus();\r\n        }\r\n    }\r\n}\r\n\r\n// Export to window\r\n(window as any).TextEditorDocument = TextEditorDocument;\r\n"]}